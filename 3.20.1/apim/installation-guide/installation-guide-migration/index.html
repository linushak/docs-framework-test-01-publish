
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.4.2, mkdocs-material-8.5.11+insiders-4.26.6" name="generator"/>
<title>Upgrade APIM - Gravitee Platform Documentation</title>
<link href="../../../assets/stylesheets/main.9b35cbb9.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.2505c338.min.css" rel="stylesheet"/>
<style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h224V368c0-26.5 21.5-48 48-48h112V96c0-35.3-28.7-64-64-64H64zm384 320H336c-8.8 0-16 7.2-16 16v112l32-32 64-64 32-32z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0 0 114.6 0 256s114.6 256 256 256zm-40-176h24v-64h-24c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24h-80c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-144c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M480 32c0-12.9-7.8-24.6-19.8-29.6S434.5.2 425.3 9.3L381.7 53c-48 48-113.1 75-181 75H64c-35.3 0-64 28.7-64 64v96c0 35.3 28.7 64 64 64v128c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32V352h8.7c67.9 0 133 27 181 75l43.6 43.6c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V300.4c18.6-8.8 32-32.5 32-60.4s-13.4-51.6-32-60.4V32zm-64 76.7v262.6C357.2 317.8 280.5 288 200.7 288H192v-96h8.7c79.8 0 156.5-29.8 215.3-83.3z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M470.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L192 338.7l233.4-233.3c12.5-12.5 32.8-12.5 45.3 0z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M256 512c141.4 0 256-114.6 256-256S397.4 0 256 0 0 114.6 0 256s114.6 256 256 256zm-86.2-346.7c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1 0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6-13.3 0-24-10.7-24-24v-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1 0-8.4-6.8-15.1-15.1-15.1h-58.3c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM288 352c0 17.7-14.3 32-32 32s-32-14.3-32-32 14.3-32 32-32 32 14.3 32 32z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7.2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8.2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24v112c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224c0-17.7-14.3-32-32-32s-32 14.3-32 32 14.3 32 32 32 32-14.3 32-32z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.1 52.4 442.6 6.5c-1.9-3.9-6.1-6.5-10.5-6.5s-8.5 2.6-10.4 6.5l-16.5 45.9-46 16.8c-4.3 1.6-7.3 5.9-7.2 10.4 0 4.5 3 8.7 7.2 10.2l45.7 16.8 16.8 45.8c1.5 4.4 5.8 7.5 10.4 7.5s8.9-3.1 10.4-7.5l16.5-45.8 45.7-16.8c4.2-1.5 7.2-5.7 7.2-10.2 0-4.6-3-8.9-7.2-10.4l-45.6-16.8zm-132.4 53c-12.5-12.5-32.8-12.5-45.3 0l-2.9 2.9c-22-8-45.8-12.3-70.5-12.3C93.1 96 0 189.1 0 304s93.1 208 208 208 208-93.1 208-208c0-24.7-4.3-48.5-12.2-70.5l2.9-2.9c12.5-12.5 12.5-32.8 0-45.3l-80-80zM200 192c-57.4 0-104 46.6-104 104v8c0 8.8-7.2 16-16 16s-16-7.2-16-16v-8c0-75.1 60.9-136 136-136h8c8.8 0 16 7.2 16 16s-7.2 16-16 16h-8z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M416 398.9c58.5-41.1 96-104.1 96-174.9C512 100.3 397.4 0 256 0S0 100.3 0 224c0 70.7 37.5 133.8 96 174.9V464c0 26.5 21.5 48 48 48h48v-48c0-8.8 7.2-16 16-16s16 7.2 16 16v48h64v-48c0-8.8 7.2-16 16-16s16 7.2 16 16v48h48c26.5 0 48-21.5 48-48v-65.1zM224 256c0 35.3-28.7 64-64 64s-64-28.7-64-64 28.7-64 64-64 64 28.7 64 64zm128 64c-35.3 0-64-28.7-64-64s28.7-64 64-64 64 28.7 64 64-28.7 64-64 64z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M320 0c17.7 0 32 14.3 32 32v64h128c35.3 0 64 28.7 64 64v288c0 35.3-28.7 64-64 64H160c-35.3 0-64-28.7-64-64V160c0-35.3 28.7-64 64-64h128V32c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zM264 256c0-22.1-17.9-40-40-40s-40 17.9-40 40 17.9 40 40 40 40-17.9 40-40zm152 40c22.1 0 40-17.9 40-40s-17.9-40-40-40-40 17.9-40 40 17.9 40 40 40zM48 224h16v192H48c-26.5 0-48-21.5-48-48v-96c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48h-16V224h16z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M288 0H128c-17.7 0-32 14.3-32 32s14.3 32 32 32v132.8c0 11.8-3.3 23.5-9.5 33.5L10.3 406.2C3.6 417.2 0 429.7 0 442.6 0 480.9 31.1 512 69.4 512h309.2c38.3 0 69.4-31.1 69.4-69.4 0-12.8-3.6-25.4-10.3-36.4L329.5 230.4c-6.2-10.1-9.5-21.7-9.5-33.5V64c17.7 0 32-14.3 32-32S337.7 0 320 0h-32zm-96 196.8V64h64v132.8c0 23.7 6.6 46.9 19 67.1l34.5 56.1h-171l34.5-56.1c12.4-20.2 19-43.4 19-67.1z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M0 216C0 149.7 53.7 96 120 96h8c17.7 0 32 14.3 32 32s-14.3 32-32 32h-8c-30.9 0-56 25.1-56 56v8h64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V216zm256 0c0-66.3 53.7-120 120-120h8c17.7 0 32 14.3 32 32s-14.3 32-32 32h-8c-30.9 0-56 25.1-56 56v8h64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64h-64c-35.3 0-64-28.7-64-64V216z"/></svg>');}</style>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../../stylesheets/extra.css" rel="stylesheet"/>
<link href="../../../assets/css/swagger-ui.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<script id="__analytics">function __md_analytics(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-67690250-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");ga("send","event","feedback","click",t,e),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){ga("send","pageview",e.pathname)})});var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
<script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
<meta content="website" property="og:type"/>
<meta content="Upgrade APIM - Gravitee Platform Documentation" property="og:title"/>
<meta content="None" property="og:description"/>
<meta content="./assets/images/social/apim/installation-guide/installation-guide-migration.png" property="og:image"/>
<meta content="image/png" property="og:image:type"/>
<meta content="1200" property="og:image:width"/>
<meta content="630" property="og:image:height"/>
<meta content="None" property="og:url"/>
<meta content="summary_large_image" name="twitter:card"/>
<meta content="Upgrade APIM - Gravitee Platform Documentation" name="twitter:title"/>
<meta content="None" name="twitter:description"/>
<meta content="./assets/images/social/apim/installation-guide/installation-guide-migration.png" name="twitter:image"/>
</head>
<body data-md-color-accent="blue" data-md-color-primary="teal" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#upgrade-apim">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<div data-md-component="outdated" hidden="">
</div>
<header class="md-header md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Gravitee Platform Documentation" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="Gravitee Platform Documentation">
<img alt="logo" src="../../../assets/logo-white.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Gravitee Platform Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Upgrade APIM
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="blue" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="teal" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="blue" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="teal" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"></path></svg>
</label>
</form>
<script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/ivan-gravitee/docs-framework-poc" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    docs-framework-poc
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
          
  
    
  
  Docs Home

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../../">
          
  
    
  
  API Management

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../am/">
          
  
    
  
  Access Management

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../ae/">
          
  
    
  
  Alert Engine

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../cockpit/">
          
  
    
  
  Cockpit

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../ee/">
          
  
    
  
  Enterprise Edition

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../releases/">
          
  
    
  
  Releases

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../api-reference-index/">
          
  
  API Reference

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../dev-community/">
          
  
    
  
  Community Forum

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../marketplace/">
          
  
  Marketplace

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Gravitee Platform Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="Gravitee Platform Documentation">
<img alt="logo" src="../../../assets/logo-white.png"/>
</a>
    Gravitee Platform Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/ivan-gravitee/docs-framework-poc" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    docs-framework-poc
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" id="__nav_1" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Docs Home
    
  </span>
</a>
<label class="md-nav__link" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Docs Home" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            Docs Home
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../platform-overview/">
<span class="md-ellipsis">
    Platform overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../overview/introduction/">
<span class="md-ellipsis">
    Get started
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../overview/introduction/#concepts">
<span class="md-ellipsis">
    Key concepts
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../whats-new/">
<span class="md-ellipsis">
    What's new
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../products/">
<span class="md-ellipsis">
    Browse by product
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../best-practice/">
<span class="md-ellipsis">
    Examples and best practices
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../user-journeys/">
<span class="md-ellipsis">
    I want to learn about...
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../glossary/">
<span class="md-ellipsis">
    Glossary of terms
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../contribute/">
<span class="md-ellipsis">
    How to contribute
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../">
<span class="md-ellipsis">
    API Management
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="API Management" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            API Management
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2">
<span class="md-ellipsis">
    Overview
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Overview" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            Overview
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../overview/introduction/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../overview/architecture/">
<span class="md-ellipsis">
    Architecture
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../overview/components/">
<span class="md-ellipsis">
    Components
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../overview/plugins/">
<span class="md-ellipsis">
    Plugins
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3">
<span class="md-ellipsis">
    Installation Guide
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Installation Guide" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            Installation Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../installation-guide/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_2" id="__nav_2_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3_2">
<span class="md-ellipsis">
    Install on Amazon
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Install on Amazon" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_3_2">
<span class="md-nav__icon md-icon"></span>
            Install on Amazon
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../amazon-linux/installation-guide-amazon-introduction/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../amazon-linux/installation-guide-amazon-prerequisite-machine/">
<span class="md-ellipsis">
    Prerequisite - Machine
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../amazon-linux/installation-guide-amazon-prerequisite-yum/">
<span class="md-ellipsis">
    Prerequisite - Set up Gravitee YUM repository
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../amazon-linux/installation-guide-amazon-prerequisite-java/">
<span class="md-ellipsis">
    Prerequisite - Install Java 11
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../amazon-linux/installation-guide-amazon-prerequisite-mongodb/">
<span class="md-ellipsis">
    Prerequisite - Install MongoDB
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../amazon-linux/installation-guide-amazon-prerequisite-elasticsearch/">
<span class="md-ellipsis">
    Prerequisite - Install Elasticsearch
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../amazon-linux/installation-guide-amazon-prerequisite-nginx/">
<span class="md-ellipsis">
    Prerequisite - Install Nginx
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../amazon-linux/installation-guide-amazon-gateway/">
<span class="md-ellipsis">
    Component - Install Gateway
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../amazon-linux/installation-guide-amazon-rest-api/">
<span class="md-ellipsis">
    Component - Install REST API
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../amazon-linux/installation-guide-amazon-management-ui/">
<span class="md-ellipsis">
    Component - Install Management UI
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../amazon-linux/installation-guide-amazon-portal-ui/">
<span class="md-ellipsis">
    Component - Install Portal UI
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../amazon-linux/installation-guide-amazon-all/">
<span class="md-ellipsis">
    Component - Install all
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../amazon-linux/installation-guide-amazon-stack/">
<span class="md-ellipsis">
    Full stack installation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../amazon-linux/installation-guide-amazon-issue/">
<span class="md-ellipsis">
    Fixing a known post-installation issue
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_3" id="__nav_2_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3_3">
<span class="md-ellipsis">
    Install on Docker
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Install on Docker" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_3_3">
<span class="md-nav__icon md-icon"></span>
            Install on Docker
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../docker/installation-guide-docker-introduction/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../docker/installation-guide-docker-images/">
<span class="md-ellipsis">
    Images
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../docker/installation-guide-docker-images-ee/">
<span class="md-ellipsis">
    Images (EE)
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../docker/installation-guide-docker-compose/">
<span class="md-ellipsis">
    Compose
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../docker/installation-guide-docker-compose-ee/">
<span class="md-ellipsis">
    Compose (EE)
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../docker/installation-guide-docker-customize/">
<span class="md-ellipsis">
    Customize
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../installation-guide-kubernetes/">
<span class="md-ellipsis">
    Installing APIM with Kubernetes
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_5" id="__nav_2_3_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3_5">
<span class="md-ellipsis">
    Install on RedHat and CentOS
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Install on RedHat and CentOS" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_3_5">
<span class="md-nav__icon md-icon"></span>
            Install on RedHat and CentOS
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../red-hat/installation-guide-redhat-introduction/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../red-hat/installation-guide-redhat-stack/">
<span class="md-ellipsis">
    Install full APIM stack
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../red-hat/installation-guide-redhat-gateway/">
<span class="md-ellipsis">
    Install APIM Gateway
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../red-hat/installation-guide-redhat-management-api/">
<span class="md-ellipsis">
    Install APIM API
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../red-hat/installation-guide-redhat-management-ui/">
<span class="md-ellipsis">
    Install APIM Console
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../red-hat/installation-guide-redhat-portal/">
<span class="md-ellipsis">
    Install APIM Portal
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_6" id="__nav_2_3_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3_6">
<span class="md-ellipsis">
    Hybrid Deployment
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Hybrid Deployment" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_3_6">
<span class="md-nav__icon md-icon"></span>
            Hybrid Deployment
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../hybrid/installation-guide-hybrid-deployment-v1/">
<span class="md-ellipsis">
    Hybrid Deployment Guide V1
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hybrid/installation-guide-hybrid-deployment-v2/">
<span class="md-ellipsis">
    Hybrid Deployment Guide V2
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hybrid/installation-guide-hybrid-kubernetes/">
<span class="md-ellipsis">
    Deploy a Hybrid architecture with Kubernetes
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3_7" id="__nav_2_3_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3_7">
<span class="md-ellipsis">
    Install with .ZIP
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Install with .ZIP" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_3_7">
<span class="md-nav__icon md-icon"></span>
            Install with .ZIP
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../with-zip/installation-guide-gateway-install-zip/">
<span class="md-ellipsis">
    Install APIM Gateway
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../with-zip/installation-guide-rest-apis-install-zip/">
<span class="md-ellipsis">
    Install APIM API
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../with-zip/installation-guide-management-ui-install-zip/">
<span class="md-ellipsis">
    Install APIM Console
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../with-zip/installation-guide-portal-ui-install-zip/">
<span class="md-ellipsis">
    Install APIM Portal
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-tos/how-to-general-configuration/">
<span class="md-ellipsis">
    Configure a production-ready APIM environment
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-tos/how-to-configure-reverse-proxy/">
<span class="md-ellipsis">
    Configure HTTP reverse proxy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../installation-guide-plugins/">
<span class="md-ellipsis">
    Installing and updating Plugins
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Upgrade APIM
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Upgrade APIM
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#upgrade-notes">
<span class="md-ellipsis">
      Upgrade Notes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#breaking-changes">
<span class="md-ellipsis">
      Breaking changes
    </span>
</a>
<nav aria-label="Breaking changes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#api-key-and-jwt-plans">
<span class="md-ellipsis">
      API key and JWT plans
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#breaking-changes_1">
<span class="md-ellipsis">
      Breaking changes
    </span>
</a>
<nav aria-label="Breaking changes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#portal-api">
<span class="md-ellipsis">
      Portal API
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#breaking-changes_2">
<span class="md-ellipsis">
      Breaking changes
    </span>
</a>
<nav aria-label="Breaking changes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#environment-audits">
<span class="md-ellipsis">
      Environment Audits
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#platform-alerts-on-multi-environments-apim">
<span class="md-ellipsis">
      Platform alerts on multi-environments APIM
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#system-roles-edition">
<span class="md-ellipsis">
      System Roles Edition
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#plugin-renaming">
<span class="md-ellipsis">
      Plugin renaming
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#mysql">
<span class="md-ellipsis">
      MySQL
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#plans-data">
<span class="md-ellipsis">
      Plans data
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#breaking-changes_3">
<span class="md-ellipsis">
      Breaking changes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#breaking-changes_4">
<span class="md-ellipsis">
      Breaking Changes
    </span>
</a>
<nav aria-label="Breaking Changes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#management-api-documentation">
<span class="md-ellipsis">
      Management API Documentation
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#docker-images-enterprise-edition">
<span class="md-ellipsis">
      Docker Images - Enterprise Edition
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#upgrade-order">
<span class="md-ellipsis">
      Upgrade Order
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deprecated-bridge-endpoints">
<span class="md-ellipsis">
      Deprecated Bridge Endpoints
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#the-mongodb-upgrade-scripts-have-been-moved">
<span class="md-ellipsis">
      The mongodb upgrade scripts have been moved
    </span>
</a>
<nav aria-label="The mongodb upgrade scripts have been moved" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#mongodb">
<span class="md-ellipsis">
      MongoDB
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#breaking-changes_5">
<span class="md-ellipsis">
      Breaking changes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#breaking-change">
<span class="md-ellipsis">
      Breaking Change
    </span>
</a>
<nav aria-label="Breaking Change" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#docker-images-enterprise-edition_1">
<span class="md-ellipsis">
      Docker Images - Enterprise Edition
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#api-definition-import-process-changes">
<span class="md-ellipsis">
      API definition import process changes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#deprecations">
<span class="md-ellipsis">
      Deprecations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#breaking-changes_6">
<span class="md-ellipsis">
      Breaking changes
    </span>
</a>
<nav aria-label="Breaking changes" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#api-key-and-jwt-plans_1">
<span class="md-ellipsis">
      API key and JWT plans
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4">
<span class="md-ellipsis">
    Quick Start Guide
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Quick Start Guide" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
            Quick Start Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../quickstart/quickstart-overview/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4_2" id="__nav_2_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4_2">
<span class="md-ellipsis">
    Get started
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Get started" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_4_2">
<span class="md-nav__icon md-icon"></span>
            Get started
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../quickstart/quickstart-console-login/">
<span class="md-ellipsis">
    Log in to APIM Console
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../quickstart/quickstart-portal-login/">
<span class="md-ellipsis">
    Log in to APIM Portal
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4_3" id="__nav_2_4_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4_3">
<span class="md-ellipsis">
    Publish your first API
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Publish your first API" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_4_3">
<span class="md-nav__icon md-icon"></span>
            Publish your first API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../quickstart/api-publisher/api-publisher-ui/">
<span class="md-ellipsis">
    Publish your first API with APIM Console
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../quickstart/api-publisher/api-publisher-api/">
<span class="md-ellipsis">
    Publish your first API with APIM API
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4_4" id="__nav_2_4_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4_4">
<span class="md-ellipsis">
    Consume and API
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Consume and API" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_4_4">
<span class="md-nav__icon md-icon"></span>
            Consume and API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../quickstart/api-consumer/api-consumer-ui/">
<span class="md-ellipsis">
    Using APIM Portal
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../quickstart/api-consumer/api-consumer-api/">
<span class="md-ellipsis">
    Using APIM API
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../quickstart/api-consumer/api-consumer-test/">
<span class="md-ellipsis">
    Test your API
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5" id="__nav_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5">
<span class="md-ellipsis">
    Configuration Guide
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Configuration Guide" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
            Configuration Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/configuration-guide/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5_2" id="__nav_2_5_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5_2">
<span class="md-ellipsis">
    Configure APIM Gateway
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Configure APIM Gateway" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_5_2">
<span class="md-nav__icon md-icon"></span>
            Configure APIM Gateway
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/gateway/installation-guide-gateway-configuration/">
<span class="md-ellipsis">
    General configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/gateway/installation-guide-gateway-technical-api/">
<span class="md-ellipsis">
    Internal API
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/gateway/installation-guide-gateway-metrics/">
<span class="md-ellipsis">
    Metrics
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/gateway/configure-opentracing/">
<span class="md-ellipsis">
    Enable OpenTracing
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/gateway/opentracing-in-docker/">
<span class="md-ellipsis">
    OpenTracing In Docker
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5_3" id="__nav_2_5_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5_3">
<span class="md-ellipsis">
    Configure APIM API
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Configure APIM API" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_5_3">
<span class="md-nav__icon md-icon"></span>
            Configure APIM API
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/rest-apis/installation-guide-rest-apis-configuration/">
<span class="md-ellipsis">
    General configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/rest-apis/installation-guide-rest-apis-technical-api/">
<span class="md-ellipsis">
    Internal API
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/rest-apis/installation-guide-rest-apis-metrics/">
<span class="md-ellipsis">
    Metrics
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/rest-apis/installation-guide-rest-apis-security/">
<span class="md-ellipsis">
    Security
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5_4" id="__nav_2_5_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5_4">
<span class="md-ellipsis">
    Configure APIM Console
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Configure APIM Console" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_5_4">
<span class="md-nav__icon md-icon"></span>
            Configure APIM Console
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/management-ui/installation-guide-management-ui-configuration/">
<span class="md-ellipsis">
    General configuration
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/management-ui/installation-guide-dashboard-configuration/">
<span class="md-ellipsis">
    Dashboards
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/portal-ui/installation-guide-portal-ui-configuration/">
<span class="md-ellipsis">
    Configure APIM Portal
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5_6" id="__nav_2_5_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5_6">
<span class="md-ellipsis">
    Configure repositories
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Configure repositories" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_5_6">
<span class="md-nav__icon md-icon"></span>
            Configure repositories
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/repositories/installation-guide-repositories/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/repositories/installation-guide-repositories-elasticsearch/">
<span class="md-ellipsis">
    Elasticsearch
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/repositories/installation-guide-repositories-mongodb/">
<span class="md-ellipsis">
    MongoDB
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/repositories/installation-guide-repositories-jdbc/">
<span class="md-ellipsis">
    JDBC
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/repositories/installation-guide-repositories-redis/">
<span class="md-ellipsis">
    Redis
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_5_7" id="__nav_2_5_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5_7">
<span class="md-ellipsis">
    Configure authentication
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Configure authentication" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_5_7">
<span class="md-nav__icon md-icon"></span>
            Configure authentication
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/authentication/installation-guide-authentication/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/authentication/installation-guide-authentication-inmemory/">
<span class="md-ellipsis">
    Configure in-memory authentication
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/authentication/installation-guide-authentication-ldap/">
<span class="md-ellipsis">
    Configure LDAP / Active Directory authentication
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/authentication/installation-guide-authentication-apim/">
<span class="md-ellipsis">
    Configure APIM repository authentication
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/authentication/installation-guide-authentication-graviteeam/">
<span class="md-ellipsis">
    Configure Gravitee Access Management authentication
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/authentication/installation-guide-authentication-github/">
<span class="md-ellipsis">
    Configure GitHub authentication
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/authentication/installation-guide-authentication-google/">
<span class="md-ellipsis">
    Configure Google authentication
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/authentication/installation-guide-authentication-keycloak/">
<span class="md-ellipsis">
    Configure Keycloak authentication
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/reporters/installation-guide-reporters/">
<span class="md-ellipsis">
    Configure Reporters
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../configuration/installation-guide-cache/">
<span class="md-ellipsis">
    Configure Cache
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../installation-guide-configuration-notifications.md">
<span class="md-ellipsis">
    Configure Notifications
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../installation-guide-configuration-dictionaries.md">
<span class="md-ellipsis">
    Configure Dictionaries
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" id="__nav_2_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6">
<span class="md-ellipsis">
    API Publisher Guide
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="API Publisher Guide" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_6">
<span class="md-nav__icon md-icon"></span>
            API Publisher Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/manage-api/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6_2" id="__nav_2_6_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6_2">
<span class="md-ellipsis">
    Manage APIs
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Manage APIs" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_2">
<span class="md-nav__icon md-icon"></span>
            Manage APIs
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/manage-apis/using-console/">
<span class="md-ellipsis">
    Using APIM console
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/manage-apis/using-apis/">
<span class="md-ellipsis">
    Using Management APIs
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6_3" id="__nav_2_6_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6_3">
<span class="md-ellipsis">
    Service Management Ecosystem (SME)
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Service Management Ecosystem (SME)" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_3">
<span class="md-nav__icon md-icon"></span>
            Service Management Ecosystem (SME)
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/sme/sme-overview/">
<span class="md-ellipsis">
    Introducing SME
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/sme/introducing-kafka/">
<span class="md-ellipsis">
    Introducing the Kafka connector
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/sme/using-kafka-connector/">
<span class="md-ellipsis">
    Using the Kafka connector
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/sme/kafka-connector-configuration/">
<span class="md-ellipsis">
    Configuring the Kafka connector
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6_4" id="__nav_2_6_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6_4">
<span class="md-ellipsis">
    Plans and subscriptions
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Plans and subscriptions" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_4">
<span class="md-nav__icon md-icon"></span>
            Plans and subscriptions
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/plans/plans-and-subscriptions/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/plans/create-plan/">
<span class="md-ellipsis">
    Create a plan
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/plans/plan-security/">
<span class="md-ellipsis">
    Configure plan security
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/plans/plan-restrictions/">
<span class="md-ellipsis">
    Configure plan restrictions
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/plans/plan-policies/">
<span class="md-ellipsis">
    Configure plan flows and policies
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/plans/plan-publish/">
<span class="md-ellipsis">
    Publish a plan
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/plans/plan-general-conditions/">
<span class="md-ellipsis">
    Configure plan general conditions of use
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/plans/plan-subscriptions/">
<span class="md-ellipsis">
    Manage plan subscriptions
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/manage-members/">
<span class="md-ellipsis">
    API users and ownership
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/api-property-encryption/">
<span class="md-ellipsis">
    API properties and encryption
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/response-templates/">
<span class="md-ellipsis">
    Response templates
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/configuring-cors/">
<span class="md-ellipsis">
    CORS
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/logging-analytics/">
<span class="md-ellipsis">
    Logging and analytics
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/audit-trail/">
<span class="md-ellipsis">
    Audit trail
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/backend-services/">
<span class="md-ellipsis">
    Load balancing, failover, and health check
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/messaging/">
<span class="md-ellipsis">
    Send notifications
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/api-rating/">
<span class="md-ellipsis">
    API rating
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/top-apis/">
<span class="md-ellipsis">
    Top APIs
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6_15" id="__nav_2_6_15" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6_15">
<span class="md-ellipsis">
    Resources
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Resources" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_15">
<span class="md-nav__icon md-icon"></span>
            Resources
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/resources/resources-overview/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/resources/resource-cache/">
<span class="md-ellipsis">
    Cache
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/resources/resource-cache-redis/">
<span class="md-ellipsis">
    Cache Redis
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/resources/resource-oauth2-am/">
<span class="md-ellipsis">
    OAuth2 - Gravitee Access Management
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/resources/resource-oauth2-generic/">
<span class="md-ellipsis">
    OAuth2 - Generic Authorization Server
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6_16" id="__nav_2_6_16" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6_16">
<span class="md-ellipsis">
    Design Studio Guide
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Design Studio Guide" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_16">
<span class="md-nav__icon md-icon"></span>
            Design Studio Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/design-studio/design-studio-overview/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/design-studio/design-studio-migrate/">
<span class="md-ellipsis">
    Migrate to Design Studio
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/design-studio/design-studio-create/">
<span class="md-ellipsis">
    Design your API flows
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/design-studio/design-studio-try-it/">
<span class="md-ellipsis">
    Try It mode
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/design-studio/design-studio-debug-mode/">
<span class="md-ellipsis">
    Debug ode
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6_17" id="__nav_2_6_17" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6_17">
<span class="md-ellipsis">
    Documentation
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Documentation" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_17">
<span class="md-nav__icon md-icon"></span>
            Documentation
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/documentation/publish-documentation/">
<span class="md-ellipsis">
    Publish API documentation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/documentation/publish-documentation-markdown/">
<span class="md-ellipsis">
    Markdown documentation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/documentation/publish-documentation-asciidoc/">
<span class="md-ellipsis">
    AsciiDoc documentation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/documentation/publish-documentation-markdown-template/">
<span class="md-ellipsis">
    Markdown templates
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/documentation/publish-documentation-openapi/">
<span class="md-ellipsis">
    OpenAPI documentation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/documentation/publish-documentation-system-folders/">
<span class="md-ellipsis">
    Customize the APIM Portal navigation
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6_18" id="__nav_2_6_18" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_6_18">
<span class="md-ellipsis">
    Service discovery
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Service discovery" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_6_18">
<span class="md-nav__icon md-icon"></span>
            Service discovery
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/service-discovery/service-discovery-overview/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/service-discovery/service-discovery-eureka/">
<span class="md-ellipsis">
    Eureka service discovery
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/service-discovery/service-discovery-consul/">
<span class="md-ellipsis">
    HashiCorp Consul service discovery
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/promote-api/">
<span class="md-ellipsis">
    Cockpit features - Promote APIs
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/publisher/expression-language/">
<span class="md-ellipsis">
    Expression Language
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_7" id="__nav_2_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_7">
<span class="md-ellipsis">
    API Consumer Guide
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="API Consumer Guide" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_7">
<span class="md-nav__icon md-icon"></span>
            API Consumer Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/consumer/developer-portal/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/consumer/developer-create-account/">
<span class="md-ellipsis">
    Create a user account
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/consumer/developer-manage/">
<span class="md-ellipsis">
    Manage applications
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/consumer/developer-subscribe/">
<span class="md-ellipsis">
    Subscribe to an API
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_8" id="__nav_2_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_8">
<span class="md-ellipsis">
    Administration Guide
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Administration Guide" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_8">
<span class="md-nav__icon md-icon"></span>
            Administration Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/admin/admin-guide-organizations-and-environments/">
<span class="md-ellipsis">
    Organizations and environments
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/admin/admin-guide-roles-and-permissions/">
<span class="md-ellipsis">
    Roles and permissions
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/admin/admin-guide-users-and-groups/">
<span class="md-ellipsis">
    Users and groups
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/admin/admin-guide-users-support-tickets/">
<span class="md-ellipsis">
    Support
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../user-guide/admin/admin-guide-platform-policies/">
<span class="md-ellipsis">
    Platform policies
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_9" id="__nav_2_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_9">
<span class="md-ellipsis">
    How To
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="How To" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_9">
<span class="md-nav__icon md-icon"></span>
            How To
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-tos/how-to-add-custom-metrics-in-dashboards/">
<span class="md-ellipsis">
    Add custom metrics in dashboards
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../how-tos/how-to-configure-global-API-reviewers/">
<span class="md-ellipsis">
    Configure global API reviewers
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_10" id="__nav_2_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_10">
<span class="md-ellipsis">
    Developer Guide
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Developer Guide" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_10">
<span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../dev-guide/dev-guide-boostrap/">
<span class="md-ellipsis">
    Bootstrap Your Dev Environment
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../dev-guide/dev-guide-plugins/">
<span class="md-ellipsis">
    Plugins
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../dev-guide/dev-guide-policies/">
<span class="md-ellipsis">
    Policies
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_11" id="__nav_2_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_11">
<span class="md-ellipsis">
    Policy reference
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Policy reference" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_11">
<span class="md-nav__icon md-icon"></span>
            Policy reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policies-overview/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-apikey/">
<span class="md-ellipsis">
    API key policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-assign-attributes">
<span class="md-ellipsis">
    Assign attributes policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-assign-content/">
<span class="md-ellipsis">
    Assign content policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-assign-metrics/">
<span class="md-ellipsis">
    Assign metrics policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-basic-authentication/">
<span class="md-ellipsis">
    Basic authentication policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-cache/">
<span class="md-ellipsis">
    Cache policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-callout-http/">
<span class="md-ellipsis">
    Callout HTTP policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-circuit-breaker/">
<span class="md-ellipsis">
    Circuit Breaker policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-data-logging-masking/">
<span class="md-ellipsis">
    Data logging masking policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-dynamic-routing/">
<span class="md-ellipsis">
    Dynamic routing policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-generate-http-signature/">
<span class="md-ellipsis">
    Generate HTTP Signature policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-generate-jwt/">
<span class="md-ellipsis">
    Generate JWT policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-groovy/">
<span class="md-ellipsis">
    Groovy policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-html-json/">
<span class="md-ellipsis">
    HTML to JSON policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-http-signature/">
<span class="md-ellipsis">
    HTTP signature policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-ipfiltering/">
<span class="md-ellipsis">
    IP filtering policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-javascript/">
<span class="md-ellipsis">
    Javascript policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-json-threat-protection/">
<span class="md-ellipsis">
    JSON threat protection policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-json-to-json/">
<span class="md-ellipsis">
    JSON to JSON policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-json-xml/">
<span class="md-ellipsis">
    JSON to XML policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-json-validation/">
<span class="md-ellipsis">
    JSON validation policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-jws/">
<span class="md-ellipsis">
    JWS policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-jwt/">
<span class="md-ellipsis">
    JWT policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-keyless/">
<span class="md-ellipsis">
    Keyless policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-latency/">
<span class="md-ellipsis">
    Latency policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-metrics-reporter/">
<span class="md-ellipsis">
    Metrics reporter policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-mock/">
<span class="md-ellipsis">
    Mock policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-oauth2/">
<span class="md-ellipsis">
    OAuth2 policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-openid-connect-userinfo/">
<span class="md-ellipsis">
    OpenID Connect UserInfo policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-override-http-method/">
<span class="md-ellipsis">
    Override HTTP method policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-ratelimit/">
<span class="md-ellipsis">
    Rate limiting policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-regex-threat-protection/">
<span class="md-ellipsis">
    Regex threat protection policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-request-content-limit/">
<span class="md-ellipsis">
    Request content limit policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-request-validation/">
<span class="md-ellipsis">
    Request validation policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-resource-filtering/">
<span class="md-ellipsis">
    Resource filtering policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-rest-to-soap/">
<span class="md-ellipsis">
    REST to SOAP policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-retry/">
<span class="md-ellipsis">
    Retry policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-role-based-access-control/">
<span class="md-ellipsis">
    Role-based access control policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-ssl-enforcement/">
<span class="md-ellipsis">
    SSL enforcement policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-traffic-shadowing/">
<span class="md-ellipsis">
    Traffic shadowing policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-transform-headers/">
<span class="md-ellipsis">
    Transform headers policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-transform-queryparameters/">
<span class="md-ellipsis">
    Transform query parameters policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-url-rewriting/">
<span class="md-ellipsis">
    URL rewriting policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-xml-json/">
<span class="md-ellipsis">
    XML to JSON policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-xml-threat-protection/">
<span class="md-ellipsis">
    Threat protection policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-xml-validation/">
<span class="md-ellipsis">
    XML validation policy
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../policy-reference/policy-xlst.md">
<span class="md-ellipsis">
    XSLT policy
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_12" id="__nav_2_12" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_12">
<span class="md-ellipsis">
    Gravitee Kubernetes Operator (GKO)
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Gravitee Kubernetes Operator (GKO)" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_12">
<span class="md-nav__icon md-icon"></span>
            Gravitee Kubernetes Operator (GKO)
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes/apim-kubernetes-operator-overview/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes/apim-kubernetes-operator-architecture/">
<span class="md-ellipsis">
    Architecture
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_12_3" id="__nav_2_12_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_12_3">
<span class="md-ellipsis">
    Installation and deployment
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Installation and deployment" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_12_3">
<span class="md-nav__icon md-icon"></span>
            Installation and deployment
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes/apim-kubernetes-operator-installation/">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes/apim-kubernetes-operator-installation-cluster/">
<span class="md-ellipsis">
    Deploying GKO on a Kubernetes cluster
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes/apim-kubernetes-operator-installation-local/">
<span class="md-ellipsis">
    Setting up a local cluster for deployment
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_12_4" id="__nav_2_12_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_12_4">
<span class="md-ellipsis">
    User Guide
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="User Guide" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_12_4">
<span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes/apim-kubernetes-operator-user-guide/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes/apim-kubernetes-operator-definitions/">
<span class="md-ellipsis">
    Custom Resource Definitions (CRDs) reference
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes/apim-kubernetes-operator-user-guide-management-context/">
<span class="md-ellipsis">
    How to use the Management Context custom resource
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes/apim-kubernetes-operator-user-guide-api-definition/">
<span class="md-ellipsis">
    How to use the API Definition custom resource
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes/apim-kubernetes-operator-user-guide-sync-crds/">
<span class="md-ellipsis">
    How to sync API CRDs with a Management API
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes/apim-kubernetes-operator-user-guide-reusable-resources/">
<span class="md-ellipsis">
    How to reuse API resources with the GKO
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes/apim-kubernetes-operator-user-guide-play/">
<span class="md-ellipsis">
    How to try out the GKO after deployment
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes/apim-kubernetes-operator-api-reference/">
<span class="md-ellipsis">
    API reference
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../kubernetes/apim-kubernetes-operator-changelog/">
<span class="md-ellipsis">
    Changelog
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_13" id="__nav_2_13" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_13">
<span class="md-ellipsis">
    V4 policy execution engine (V4 BETA)
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="V4 policy execution engine (V4 BETA)" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_13">
<span class="md-nav__icon md-icon"></span>
            V4 policy execution engine (V4 BETA)
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../v4-beta/v4-beta-new-policy-execution-engine-introduction/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../v4-beta/v4-beta-new-policy-execution-engine-evolution/">
<span class="md-ellipsis">
    V3 and V4 (BETA) policy execution engines compared
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_14" id="__nav_2_14" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_14">
<span class="md-ellipsis">
    Event-native API Management (V4 BETA)
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Event-native API Management (V4 BETA)" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_14">
<span class="md-nav__icon md-icon"></span>
            Event-native API Management (V4 BETA)
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../v4-beta/v4-beta-event-native-apim-introduction/">
<span class="md-ellipsis">
    Introduction
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../v4-beta/v4-beta-event-native-apim-user-guide/">
<span class="md-ellipsis">
    User Guide
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../v4-beta/v4-beta-event-native-apim-example-use-cases/">
<span class="md-ellipsis">
    Example Use Cases
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../api-reference/apim-rest-api-reference-index/">
<span class="md-ellipsis">
    API reference
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_16" id="__nav_2_16" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_16">
<span class="md-ellipsis">
    Changelog
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Changelog" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_16">
<span class="md-nav__icon md-icon"></span>
            Changelog
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../changelog/">
<span class="md-ellipsis">
    APIM changelog index
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../changelog/changelog-3.15/">
<span class="md-ellipsis">
    APIM 3.15.x changelog
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../changelog/changelog-3.18/">
<span class="md-ellipsis">
    APIM 3.18.x changelog
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../changelog/changelog-3.19/">
<span class="md-ellipsis">
    APIM 3.19.x changelog
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../changelog/changelog-3.20/">
<span class="md-ellipsis">
    APIM 3.20.x changelog
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../changelog/changelog-eos/">
<span class="md-ellipsis">
    APIM EOS changelog
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" id="__nav_3" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../am/">
<span class="md-ellipsis">
    Access Management
    
  </span>
</a>
<label class="md-nav__link" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Access Management" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            Access Management
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../am/api-reference/am-rest-api-reference-index.md">
<span class="md-ellipsis">
    API reference
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" id="__nav_4" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../ae/">
<span class="md-ellipsis">
    Alert Engine
    
  </span>
</a>
</div>
<nav aria-label="Alert Engine" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            Alert Engine
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" id="__nav_5" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../cockpit/">
<span class="md-ellipsis">
    Cockpit
    
  </span>
</a>
</div>
<nav aria-label="Cockpit" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Cockpit
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" id="__nav_6" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../ee/">
<span class="md-ellipsis">
    Enterprise Edition
    
  </span>
</a>
<label class="md-nav__link" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-label="Enterprise Edition" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            Enterprise Edition
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ee/version/">
<span class="md-ellipsis">
    Versioning
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ee/installation/">
<span class="md-ellipsis">
    Installation
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../ee/license/">
<span class="md-ellipsis">
    Licensing
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" id="__nav_7" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../releases/">
<span class="md-ellipsis">
    Releases
    
  </span>
</a>
</div>
<nav aria-label="Releases" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            Releases
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8">
<span class="md-ellipsis">
    API Reference
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="API Reference" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../api-reference-index/">
<span class="md-ellipsis">
    Gravitee API Reference
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" id="__nav_9" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../dev-community/">
<span class="md-ellipsis">
    Community Forum
    
  </span>
</a>
</div>
<nav aria-label="Community Forum" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            Community Forum
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10">
<span class="md-ellipsis">
    Marketplace
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Marketplace" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            Marketplace
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../marketplace/">
<span class="md-ellipsis">
    Gravitee Plugins Marketplace
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<nav class="md-tags">
<span class="md-tag">APIM</span>
<span class="md-tag">Upgrade</span>
<span class="md-tag">Migration</span>
</nav>
<a class="md-content__button md-icon" href="https://github.com/ivan-gravitee/docs-framework-poc/edit/master/docs/apim/installation-guide/installation-guide-migration.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"></path></svg>
</a>
<h1 id="upgrade-apim">Upgrade APIM</h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>WORK IN PROGRESS (content incorporation and cleanup for individual versions)</p>
</div>
<h2 id="upgrade-notes">Upgrade Notes</h2>
<p>If you plan to skip versions when you upgrade, ensure that you read the
version-specific upgrade notes for each intermediate version. You may be
required to perform manual actions as part of the upgrade.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Be sure to run scripts on the correct database since <code>gravitee</code> is not always the default database! Check your db name by running <code>show dbs;</code>.</p>
</div>
<h2 id="breaking-changes">Breaking changes</h2>
<h3 id="api-key-and-jwt-plans">API key and JWT plans</h3>
<p>The security chain (the internal process that selects the executable
plan for the incoming request and applies the related security rules)
parses all active plans to select and execute the relevant one.</p>
<p><strong>Prior to this version:</strong></p>
<ul>
<li>
<p>The API key plan was executed if the request contained an API key.</p>
</li>
<li>
<p>The JWT plan was executed if the request contained a Bearer token.</p>
</li>
</ul>
<p><strong>From this version:</strong></p>
<p>The security chain has been improved to select and execute plans more
efficiently. As a result, API keys and JWT plans are now only executed
if there is an active subscription related to the provided security
token. If there is no relevant subscription, the currently parsed plans
are not executed and the security chain moves to parse the next
available plans. The process continues until the security chain parses
plans related to the provided security token and these plans are
executed, or until all available plans are parsed without a match.</p>
<p>Specific examples of this change are provided in the table below:</p>
<table>
<colgroup>
<col style="width: 25%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p>API plans</p></td>
<td style="text-align: left;"><p>Request</p></td>
<td style="text-align: left;"><p>Prior to this version</p></td>
<td style="text-align: left;"><p>From this version</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>API key plan + Keyless plan</p></td>
<td style="text-align: left;"><p>Request contains an invalid API
key</p></td>
<td style="text-align: left;"><p>API key plan is executed = HTTP 401
unauthorized</p></td>
<td style="text-align: left;"><p>Keyless plan is executed</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>JWT plan 1 + JWT plan 2</p></td>
<td style="text-align: left;"><p>Request contains a Bearer token valid
for JWT plan 2</p></td>
<td style="text-align: left;"><p>JWT plan 1 is executed = HTTP 401
unauthorized</p></td>
<td style="text-align: left;"><p>JWT plan 2 is executed</p></td>
</tr>
</tbody>
</table>
<h2 id="breaking-changes_1">Breaking changes</h2>
<h3 id="portal-api">Portal API</h3>
<p>Endpoint: <code>[GET] portal/environments/{envId}/applications</code>.</p>
<p>For performance reasons, calling <code>/applications?size=-1</code> will no longer
return the number of subscribers and the only information available in
the owner of each application will be:</p>
<ul>
<li>
<p>id</p>
</li>
<li>
<p>displayName</p>
</li>
<li>
<p>email</p>
</li>
</ul>
<h2 id="breaking-changes_2">Breaking changes</h2>
<h3 id="environment-audits">Environment Audits</h3>
<p>Endpoint:
<code>[GET] management/organizations/{orgId}/environments/{envId}/apis/{api}/audit</code>
(link:{{ <em>/apim/3.x/management-api/</em> | relative_url | append:
current_version | append: <em>/index.html#operation/getApiAudits</em> }}[API
audits^]).</p>
<p>Before this version, the Management API allowed getting all audits of
all environments and organizations with this endpoint.</p>
<p>As of 3.18.0, a GET request will return the audits of the environment
specified in the url and no longer return organization audits. To get
organization audits you need to use the following endpoint:
<code>[GET] management/organizations/{orgId}/audit</code>.</p>
<p>The query params <code>envLog:boolean</code> &amp; <code>orgLog:boolean</code> are removed. Now to
get only environment or organization audit you have to use the query
params <code>referenceType:string</code> with <code>ENVIRONMENT</code> or <code>ORGANIZATION</code>. You
can also filter by environment id with <code>environment:string</code> query
params.</p>
<h3 id="platform-alerts-on-multi-environments-apim">Platform alerts on multi-environments APIM</h3>
<p>Before this version, platform alerts were common to all environments.
That led to inconsistencies while handling platform alerts on
multi-environments APIM.</p>
<p>From this version, platform alerts are scoped to the environment. For
example, if you create an alert on your <code>production</code> environment, it is
related only to this environment.</p>
<p>Old platform alerts existing before Gravitee upgrade will be linked to
the default environment. You will see them disappear from your others
(non-default) environments, and will have to recreate them manually if
relevant.</p>
<h3 id="system-roles-edition">System Roles Edition</h3>
<p>To provide more flexibility in the way roles are managed, some system
roles have been made editable. From now on, the permissions of the
following roles can be edited:</p>
<ol>
<li>
<p>The Environment Admin Role.</p>
</li>
<li>
<p>The API Primary Owner Role</p>
</li>
<li>
<p>The Application Primary Owner Role</p>
</li>
</ol>
<p>The Organization Admin Role remains a read-only role. If any accidental
loss of access happened to one of the roles listed above, the
Organization Admin Role will be the only one able to revert the changes.</p>
<p>This mode is deactivated by default, you can toggle it on via
<code>gravitee.yml</code> :</p>
<div class="highlight"><pre><span></span><code>console:
  systemRoleEdition:
    enabled: true
</code></pre></div>
<p>Updating permissions for system roles should be done carefully to avoid
any unexpected behavior.</p>
<h3 id="plugin-renaming">Plugin renaming</h3>
<p>From this version, and for the next 3.18.x versions and greater, the
name of the Elasticsearch repository component changes.<br/>
As a consequence, the Elasticsearch repository component available on
<a href="https://download.gravitee.io">https://download.gravitee.io</a> is now<br/>
<code>gravitee-*apim*-repository-elasticsearch-x.y.z.zip</code></p>
<p>instead of<br/>
<code>gravitee-repository-elasticsearch-x.y.z.zip</code></p>
<p>This plugin has also been moved in another folder:<br/>
<a href="https://download.gravitee.io/#graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/">https://download.gravitee.io/#graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/</a>.</p>
<p>You can download directly the Elasticsearch repository using this
link:<br/>
<a href="https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/gravitee-apim-repository-elasticsearch-3.18.0.zip">https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/gravitee-apim-repository-elasticsearch-3.18.0.zip</a></p>
<h3 id="mysql">MySQL</h3>
<p>In 3.18.0, the MySQL Java driver has been updated to 8.0.29. As a
consequence, TLS 1.0 and 1.1 are no longer supported.</p>
<h2 id="plans-data">Plans data</h2>
<p>Since this version, APIM improves plans data storage, and uses the
<code>plans</code> database collection as the unique source of plans data.</p>
<p>Before trusting data in <code>plans</code> collection, we have to ensure their
reliability.</p>
<p>In 3.10, an upgrader was introduced to fix data, but was running in
dry-run mode per default.</p>
<p>This upgrader will run once again during APIM 3.18 startup, with dry-run
mode disabled : if relevant, it will fix plans data in your database as
it’s explained in <a href="https://docs.gravitee.io/pages/apim/3.x/installation-guide/upgrades/3.10.8/README.html#plans_anomalies_in_database">this
documentation</a></p>
<h2 id="breaking-changes_3">Breaking changes</h2>
<p>From this version, and for the next 3.17.x versions, the name of the
Elasticsearch repository component changes.<br/>
As a consequence, the Elasticsearch repository component available on
<a href="https://download.gravitee.io">https://download.gravitee.io</a> is now  </p>
<p><code>gravitee-*apim*-repository-elasticsearch-x.y.z.zip</code> </p>
<p>instead of  </p>
<p><code>gravitee-repository-elasticsearch-x.y.z.zip</code></p>
<p>This plugin has also been moved in another folder:
<a href="https://download.gravitee.io/#graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/">https://download.gravitee.io/#graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/</a>.  </p>
<p>You can download directly the Elasticsearch repository using this
link:<br/>
<a href="https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/gravitee-apim-repository-elasticsearch-3.17.3.zip">https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/gravitee-apim-repository-elasticsearch-3.17.3.zip</a></p>
<h2 id="breaking-changes_4">Breaking Changes</h2>
<h3 id="management-api-documentation">Management API Documentation</h3>
<p>From this version, APIM’s Management API documentation is now using
OpenAPI v3 format, instead of the old Swagger v2 format.</p>
<p>As a consequence, the specification of this API is now accessible from:</p>
<ul>
<li>
<p><code>{host:port}/management/openapi.yaml</code></p>
</li>
<li>
<p><code>{host:port}/management/openapi.json</code></p>
</li>
</ul>
<p>To allow a smooth transition, the old URL
(<code>{host:port}/management/swagger.json</code>) will remain available until
3.18.0.</p>
<h3 id="docker-images-enterprise-edition">Docker Images - Enterprise Edition</h3>
<p>To reduce the number of security vulnerabilities and ensure a better
maintenance in the future, the base Docker images used for the
Enterprise Edition have changed.</p>
<p>As of 3.17.0, APIM Gateway EE and Management API EE base Docker images
are moving from <strong>Ubuntu</strong> to <strong>Alpine</strong> with JDK 17. It means users
creating their own Docker images based on the one provided by
Gravitee.io might need to update their Dockerfile to make them
compatible with the Alpine distribution.</p>
<p><em>Notes</em>: Community Edition users will not be affected as the base images
were already <strong>Alpine</strong> ones.</p>
<h2 id="upgrade-order">Upgrade Order</h2>
<p>In order to achieve a 0 downtime upgrade, APIM has to be upgraded before
upgrading the gateways.</p>
<p>On hybrid architectures where gateway bridge feature is enabled,
gateways have to be upgraded in this order :</p>
<ol>
<li>
<p>The bridge server gateway</p>
</li>
<li>
<p>The bridge client gateway</p>
</li>
</ol>
<h2 id="deprecated-bridge-endpoints">Deprecated Bridge Endpoints</h2>
<p>Since bridge client rely on their own internals to fulfil API key
requests, the ``/apis/{api.id}/keys/{api.key}`` endpoint has been
deprecated on the bridge server and will be removed in a future version.</p>
<p>The ``/keys/_search`` endpoint has been deprecated and replaced
with ``/keys/_findByCriteria`` endpoint. It will be removed in a
future version.</p>
<p>More information on the gateway bridge feature can be found
<a href="https://docs.gravitee.io/apim/3.x/apim_installguide_hybrid_deployment.html#apim_gateway_http_bridge_server">here</a>.</p>
<h2 id="the-mongodb-upgrade-scripts-have-been-moved">The mongodb upgrade scripts have been moved</h2>
<p>For the sake of improving our documentation management process, we have
started decommissioning our
<a href="https://github.com/gravitee-io/release">release</a> repository (which
contained among other things this guide).</p>
<p>As a part of this change, our mongodb upgrade scripts are not hosted
inside the release repository anymore and have been moved to the
<a href="https://github.com/gravitee-io/gravitee-api-management/tree/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts">gravitee-api-management</a>
repository.</p>
<h3 id="mongodb">MongoDB</h3>
<p>Before running any script, please create a dump of your existing
database.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.17.0/api-keys-cleanup.js">/apim/3.x/mongodb/3.17.0/api-keys-cleanup.js</a><br/>
This script performs some cleanup on the keys collection in order to
avoid issues while moving to the new model.</p>
<h2 id="breaking-changes_5">Breaking changes</h2>
<p>From this version, and for the next 3.17.x versions, the name of the
Elasticsearch repository component changes.<br/>
As a consequence, the Elasticsearch repository component available on
<a href="https://download.gravitee.io">https://download.gravitee.io</a> is now<br/>
<code>gravitee-*apim*-repository-elasticsearch-x.y.z.zip</code></p>
<p>instead of<br/>
<code>gravitee-repository-elasticsearch-x.y.z.zip</code></p>
<p>This plugin has also been moved in another folder:<br/>
<a href="https://download.gravitee.io/#graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/">https://download.gravitee.io/#graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/</a>.</p>
<p>You can download directly the Elasticsearch repository using this
link:<br/>
<a href="https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/gravitee-apim-repository-elasticsearch-3.16.5.zip">https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/gravitee-apim-repository-elasticsearch-3.16.5.zip</a></p>
<h2 id="breaking-change">Breaking Change</h2>
<h3 id="docker-images-enterprise-edition_1">Docker Images - Enterprise Edition</h3>
<p>To reduce the number of security vulnerabilities and ensure a better
maintenance in the future, the base Docker images used for the
Enterprise Edition have changed.</p>
<p>As of 3.16.2, APIM Gateway EE and Management API EE base Docker images
are moving from <strong>Ubuntu</strong> to <strong>Alpine</strong> with JDK 17. It means users
creating their own Docker images based on the one provided by
Gravitee.io might need to update their Dockerfile to make them
compatible with the Alpine distribution.</p>
<p><em>Notes</em>: Community Edition users will not be affected as the base images
were already <strong>Alpine</strong> ones.</p>
<h2 id="api-definition-import-process-changes">API definition import process changes</h2>
<p>Gravitee 3.16.0 introduces a new <strong>crossId</strong> in API definition, which
identifies entities across environments. This improves the API import
and promotion processes reliability.</p>
<p>If you are using the <em>API import from JSON definition</em> feature, we
<strong>highly recommend</strong> updating your API definitions by re-exporting your
API.</p>
<p>Otherwise, if you import an API definition which doesn’t contain
<strong>crossId</strong>, Gravitee will do the best-effort to import your API
definition without it.</p>
<h2 id="deprecations">Deprecations</h2>
<p>The Rest API endpoints listed below are deprecated since Gravitee
v3.0.9, and will be removed in a future version.</p>
<table>
<colgroup>
<col style="width: 50%"/>
<col style="width: 50%"/>
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p>Deprecated Endpoint</p></td>
<td style="text-align: left;"><p>Replace With</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>POST /apis/{api.id}/import</p></td>
<td style="text-align: left;"><p>POST /apis/import</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>POST
/apis/{api.id}/import/swagger</p></td>
<td style="text-align: left;"><p>PUT
/apis/{api.id}/import/swagger</p></td>
</tr>
</tbody>
</table>
<h2 id="breaking-changes_6">Breaking changes</h2>
<h3 id="api-key-and-jwt-plans_1">API key and JWT plans</h3>
<p>The security chain (the internal process that selects the executable
plan for the incoming request and applies the related security rules)
parses all active plans to select and execute the relevant one.</p>
<p><strong>Prior to this version:</strong></p>
<ul>
<li>
<p>The API key plan was executed if the request contained an API key.</p>
</li>
<li>
<p>The JWT plan was executed if the request contained a Bearer token.</p>
</li>
</ul>
<p><strong>From this version:</strong></p>
<p>The security chain has been improved to select and execute plans more
efficiently. As a result, API keys and JWT plans are now only executed
if there is an active subscription related to the provided security
token. If there is no relevant subscription, the currently parsed plans
are not executed and the security chain moves to parse the next
available plans. The process continues until the security chain parses
plans related to the provided security token and these plans are
executed, or until all available plans are parsed without a match.</p>
<p>Specific examples of this change are provided in the table below:</p>
<table>
<colgroup>
<col style="width: 25%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p>API plans</p></td>
<td style="text-align: left;"><p>Request</p></td>
<td style="text-align: left;"><p>Prior to this version</p></td>
<td style="text-align: left;"><p>From this version</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>API key plan + Keyless plan</p></td>
<td style="text-align: left;"><p>Request contains an invalid API
key</p></td>
<td style="text-align: left;"><p>API key plan is executed = HTTP 401
unauthorized</p></td>
<td style="text-align: left;"><p>Keyless plan is executed</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>JWT plan 1 + JWT plan 2</p></td>
<td style="text-align: left;"><p>Request contains a Bearer token valid
for JWT plan 2</p></td>
<td style="text-align: left;"><p>JWT plan 1 is executed = HTTP 401
unauthorized</p></td>
<td style="text-align: left;"><p>JWT plan 2 is executed</p></td>
</tr>
</tbody>
</table>
<h1 id="breaking-changes_7">Breaking changes</h1>
<p>From this version, and for the next 3.15.x versions, the name of the
Elasticsearch repository component changes.<br/>
As a consequence, the Elasticsearch repository component available on
<a href="https://download.gravitee.io">https://download.gravitee.io</a> is now<br/>
<code>gravitee-*apim*-repository-elasticsearch-x.y.z.zip</code></p>
<p>instead of<br/>
<code>gravitee-repository-elasticsearch-x.y.z.zip</code></p>
<p>This plugin has also been moved in another folder:<br/>
<a href="https://download.gravitee.io/#graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/">https://download.gravitee.io/#graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/</a>.</p>
<p>You can download directly the Elasticsearch repository using this
link:<br/>
<a href="https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/gravitee-apim-repository-elasticsearch-3.15.9.zip">https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/gravitee-apim-repository-elasticsearch-3.15.9.zip</a></p>
<h2 id="breaking-change_1">Breaking Change</h2>
<h3 id="docker-images-enterprise-edition_2">Docker Images - Enterprise Edition</h3>
<p>To reduce the number of security vulnerabilities and ensure a better
maintenance in the future, the base Docker images used for the
Enterprise Edition have changed.</p>
<p>As of 3.15.6, APIM Gateway EE and Management API EE base Docker images
are moving from <strong>Ubuntu</strong> to <strong>Alpine</strong> with JDK 17. It means users
creating their own Docker images based on the one provided by
Gravitee.io might need to update their Dockerfile to make them
compatible with the Alpine distribution.</p>
<p><em>Notes</em>: Community Edition users will not be affected as the base images
were already <strong>Alpine</strong> ones.</p>
<h2 id="breaking-change_2">Breaking Change</h2>
<h3 id="management-api">Management API</h3>
<p>Since they were deprecated since version 3.12.0, the Rest API endpoints
listed below have been removed.</p>
<table>
<colgroup>
<col style="width: 50%"/>
<col style="width: 50%"/>
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p>Removed Endpoint</p></td>
<td style="text-align: left;"><p>Replace With</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>PUT
/apis/{api.id}/keys/{apiKey.key}</p></td>
<td style="text-align: left;"><p>PUT
/apis/{api.id}/subscriptions/{subscription.id}/apikeys/{apiKey.id}</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>DELETE
/apis/{api.id}/keys/{apiKey.key}</p></td>
<td style="text-align: left;"><p>DELETE
/apis/{api.id}/subscriptions/{subscription.id}/apikeys/{apiKey.id}</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>POST
/apis/{api.id}/keys/_verify?apiKey={apiKey.key}</p></td>
<td style="text-align: left;"><p>GET
/apis/{api.id}/subscriptions/_canCreate?application={application.id}&amp;key={apiKey.key}</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>DELETE
/apis/{api.id}/subscriptions/{subscription.id}/keys/{apiKey.key}</p></td>
<td style="text-align: left;"><p>DELETE
/apis/{api.id}/subscriptions/{subscription.id}/apikeys/{apiKey.id}</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>GET
/apis/{api.id}/subscriptions/{subscription.id}/keys</p></td>
<td style="text-align: left;"><p>GET
/apis/{api.id}/subscriptions/{subscription.id}/apikeys</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>POST
/apis/{api.id}/subscriptions/{subscription.id}</p></td>
<td style="text-align: left;"><p>POST
/apis/{api.id}/subscriptions/{subscription.id}/apikeys/_renew</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>POST
/apis/{api.id}/subscriptions/{subscription.id}/keys/{apiKey.key}/_reactivate</p></td>
<td style="text-align: left;"><p>POST
/apis/{api.id}/subscriptions/{subscription.id}/apikeys/{apiKey.id}/_reactivate</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>GET
/applications/{application.id}/subscriptions/{subscription.id}/keys</p></td>
<td style="text-align: left;"><p>GET
/applications/{application.id}/subscriptions/{subscription.id}/apikeys</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>POST
/applications/{application.id}/subscriptions/{subscription.id}</p></td>
<td style="text-align: left;"><p>POST
/applications/{application.id}/subscriptions/{subscription.id}/apikeys/_renew</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>DELETE
/applications/{application.id}/subscriptions/{subscription.id}/keys/{apiKey.key}</p></td>
<td style="text-align: left;"><p>DELETE
/applications/{application.id}/subscriptions/{subscription.id}/apikeys/{apiKey.id}</p></td>
</tr>
</tbody>
</table>
<h3 id="deprecation-of-path-based-api-creation">Deprecation of path-based API creation</h3>
<p>The path-based approach to create APIs will be removed in our next LTS
and has been deprecated. From now on, this mode is disabled by default
but can still be re-activated from your organization settings.</p>
<h3 id="gateway">Gateway</h3>
<h4 id="custom-policy-breaking-changes">Custom policy breaking changes</h4>
<p>We’ve made huge improvements on the v3.15.0 in order to considerably
decrease the memory and cpu resources required to serve the traffic on
the gateway. For that, we rework some parts of the gateway which have
impacts on few policies we maintain and could have impact on your custom
policies you may have developed.</p>
<p>To summarize, here is the short list of the possible breaking changes
that could impact you:</p>
<ol>
<li>
<p>Rework the way request and response headers are internally managed</p>
</li>
<li>
<p>Policy class loading</p>
</li>
</ol>
<p>Details on each breaking changes are given below.</p>
<p>All policies maintained by Gravitee’s teams are already ready to work
with APIM v3.15.0. You may consider upgrading your custom policies if
they match one of the following cases:</p>
<ul>
<li>
<p>Your policy relies on a static object instance that was previously
    instantiated per api and will become shared starting from the
    v3.15.0 of APIM</p>
</li>
<li>
<p>Your policy manipulate request or response headers and should move
    to new way to manage headers.</p>
</li>
</ul>
<p>For each of these cases, please find the appropriate actions below.</p>
<h5 id="http-headers">Http headers</h5>
<p>Starting from 3.15.0 we rework the way the request and response headers
are manage to make them even performant than ever.</p>
<p>For that reason, if your custom policy relies on headers make sure to
upgrade it by replacing <code>io.gravitee.common.http.HttpHeaders</code> with the
new headers class <code>io.gravitee.gateway.api.http.HttpHeaders</code> and migrate
the few methods where name changed a bit:</p>
<ul>
<li>
<p><code>new HttpHeaders()</code> → <code>HttpHeaders.create()</code></p>
</li>
<li>
<p><code>headers.containsKey("key")</code> → <code>headers.contains("key")</code></p>
</li>
<li>
<p><code>headers.get("key")</code> → <code>headers.getAll("key")</code> (previous get
    returned a list)</p>
</li>
</ul>
<h5 id="policy-class-loading">Policy class loading</h5>
<p>We’ve made huge improvements on the v3.15.0 by reworking the way
policies are loaded when deploying an api on the APIM gateway. While
previously, one ClassLoader were instantiated per deployed api, we
decided to shift to a single ClassLoader instance to avoid memory
pressure, especially when deploying a lot of apis. Also, policy
instances are now reused across all the requests instead of
re-instantiate them on each call.</p>
<p>For that, we had to adapt some policies we support in order to make sure
they work with the new class loading and policy instantiation
mechanisms. Basically, policy instances are now considered as fully
stateless and must get rid of any state which cannot be shared across
the whole platform.</p>
<p>All the policies we support were already stateless. However, few changes
have been made on some of them to move from static maps to cache
instances that can be safely accessed and revoked concurrently.</p>
<p><strong>For all custom policies</strong> you may have developed, we strongly
recommend adopting the same strategy by <strong>avoiding usage of static
instances in your policies</strong>. If you are unable to adapt your policy
before the migration to v3.15.0, there is still the possibility to
explicitly switch back to the previous class loading behavior by setting
the following configuration:</p>
<p>```yaml classloader: legacy: enabled: true ```</p>
<p>We highly recommend adopting the new class loading strategy as soon as
possible as it may not be maintained in the future versions.</p>
<h2 id="breaking-changes_8">Breaking changes</h2>
<h3 id="gateway_1">Gateway</h3>
<p>From with this version, the name of the APIM Gateway component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Gateway component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim-gateway*-x.y.z.zip</code> instead of
    <code>gravitee-gateway-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Gateway folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim-gateway*-x.y.z</code> instead of
    <code>graviteeio-gateway-x.y.z</code></p>
</li>
</ol>
<h2 id="gateway-bridge-upgrade">Gateway bridge upgrade</h2>
<p>On hybrid architectures where gateway bridge feature is enabled,
gateways have to be upgraded in this order :</p>
<ol>
<li>
<p>The bridge server gateway</p>
</li>
<li>
<p>The bridge client gateway</p>
</li>
</ol>
<p>More information on the gateway bridge feature can be found
<a href="https://docs.gravitee.io/apim/3.x/apim_installguide_hybrid_deployment.html#apim_gateway_http_bridge_server">here</a>.</p>
<h2 id="elastic-search-reporter-plugins-configuration">Elastic Search reporter plugins configuration</h2>
<p>Before Gravitee 3.14 :</p>
<ul>
<li>
<p>For ES&gt;=7, GeoIp and UserAgent plugins are enabled by default in
    Gravitee, and can’t be disabled</p>
</li>
<li>
<p>For ES&lt;7, those plugins are disabled by default and can be
    enabled in Gravitee configuration.</p>
</li>
</ul>
<p>Since Gravitee 3.14, it behave the same way for all ES versions : GeoIp
and UserAgent plugins are be enabled by default, and can be disabled by
overriding default <code>reporters.elasticsearch.pipeline.plugins.ingest</code>
configuration.</p>
<p>If your Gravitee configuration enables a plugin which is not available
on your ES instance, you will get this kind of error message on gateway
startup :</p>
<p><code>Unable to create ES pipeline 'gravitee_pipeline': status[400] response[{"error":{"root_cause":[{"reason":"No processor type exists with name [geoip]","processor_type":"geoip"}]</code></p>
<p>And then, you have to override
<code>reporters.elasticsearch.pipeline.plugins.ingest</code> default configuration,
to remove unrelevant plugin.</p>
<h2 id="breaking-changes_9">Breaking changes</h2>
<h3 id="gateway_2">Gateway</h3>
<p>From with this version, the name of the APIM Gateway component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Gateway component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim-gateway*-x.y.z.zip</code> instead of
    <code>gravitee-gateway-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Gateway folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim-gateway*-x.y.z</code> instead of
    <code>graviteeio-gateway-x.y.z</code></p>
</li>
</ol>
<h2 id="breaking-changes_10">Breaking changes</h2>
<h3 id="gateway_3">Gateway</h3>
<p>HTTP Bridge Service is now disabled by default starting.</p>
<p>If you are using this feature, <strong>do not forget to update your
settings.</strong></p>
<p>For more information, <a href="https://docs.gravitee.io/apim/3.x/apim_installguide_hybrid_deployment.html#apim_gateway_http_bridge_server">click
here</a>
for documentation.</p>
<h3 id="management-web-ui">Management Web UI</h3>
<p>From with this version, the name of the APIM Console component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Console component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim-console*-webui-x.y.z.zip</code> instead of
    <code>gravitee-management-webui-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Console folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim-console*-ui-x.y.z</code> instead of
    <code>graviteeio-management-ui-x.y.z</code></p>
</li>
</ol>
<h3 id="portal-web-ui">Portal Web UI</h3>
<p>From with this version, the name of the APIM Portal component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Portal component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim*-portal-webui-x.y.z.zip</code> instead of
    <code>gravitee-portal-webui-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Portal folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim*-portal-ui-x.y.z</code> instead of
    <code>graviteeio-portal-ui-x.y.z</code></p>
</li>
</ol>
<p>In future versions, others plugins &amp; components might be renamed. Stay
tuned!</p>
<h2 id="breaking-changes_11">Breaking changes</h2>
<h3 id="gateway_4">Gateway</h3>
<p>From with this version, the name of the APIM Gateway component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Gateway component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim-gateway*-x.y.z.zip</code> instead of
    <code>gravitee-gateway-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Gateway folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim-gateway*-x.y.z</code> instead of
    <code>graviteeio-gateway-x.y.z</code></p>
</li>
</ol>
<h2 id="breaking-changes_12">Breaking changes</h2>
<h3 id="management-web-ui_1">Management Web UI</h3>
<p>From with this version, the name of the APIM Console component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Console component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim-console*-webui-x.y.z.zip</code> instead of
    <code>gravitee-management-webui-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Console folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim-console*-ui-x.y.z</code> instead of
    <code>graviteeio-management-ui-x.y.z</code></p>
</li>
</ol>
<h3 id="portal-web-ui_1">Portal Web UI</h3>
<p>From with this version, the name of the APIM Portal component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Portal component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim*-portal-webui-x.y.z.zip</code> instead of
    <code>gravitee-portal-webui-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Portal folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim*-portal-ui-x.y.z</code> instead of
    <code>graviteeio-portal-ui-x.y.z</code></p>
</li>
</ol>
<p>In future versions, others plugins &amp; components might be renamed. Stay
tuned!</p>
<h2 id="breaking-change_3">Breaking Change</h2>
<p><strong>Policy plugin <code>gravitee-policy-apikey</code> prior to version 2.3.0 is no
longer compatible with APIM 3.12.0.</strong></p>
<p>Starting in version 3.12.0, you must use <code>gravitee-policy-apikey</code> &gt;=
2.3.0.</p>
<h2 id="default-settings-change-announcement">Default Settings Change Announcement</h2>
<p>HTTP Bridge Service will be disabled by default starting in version
3.13.</p>
<p>If you are using this feature, <strong>do not forget to update your
settings.</strong></p>
<p>For more information, <a href="https://docs.gravitee.io/apim/3.x/apim_installguide_hybrid_deployment.html#apim_gateway_http_bridge_server">click
here</a>
for documentation.</p>
<h2 id="api-keys">API Keys</h2>
<h3 id="model-change">Model Change</h3>
<p>Before this version, API keys contained a <strong>key</strong> attribute, which is
both the value of the key and also the database ID.</p>
<p>Starting in version 3.12.0, APIKeys now contain distinct attributes:</p>
<ul>
<li>
<p><strong>key</strong>: API key value</p>
</li>
<li>
<p><strong>ID</strong>: API key database unique ID</p>
</li>
</ul>
<p>The 3 Portal API endpoints listed below now expose distinct <strong>IDs</strong> and
<strong>keys</strong> in the HTTP response (previously, the key attribute was exposed
as <strong><em>ID</em></strong>) :</p>
<ul>
<li>
<p>GET /subscriptions/{subscription.id}</p>
</li>
<li>
<p>POST /subscriptions/{subscription.id}</p>
</li>
<li>
<p>POST /subscriptions/{subscription.id}/_renew</p>
</li>
</ul>
<h3 id="deprecated-endpoints">Deprecated Endpoints</h3>
<p>The Rest API endpoints listed below are now deprecated, and will be
removed in a future version.</p>
<table>
<colgroup>
<col style="width: 50%"/>
<col style="width: 50%"/>
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p>Deprecated Endpoint</p></td>
<td style="text-align: left;"><p>Replace With</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>PUT
/apis/{api.id}/keys/{apiKey.key}</p></td>
<td style="text-align: left;"><p>PUT
/apis/{api.id}/subscriptions/{subscription.id}/apikeys/{apiKey.id}</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>DELETE
/apis/{api.id}/keys/{apiKey.key}</p></td>
<td style="text-align: left;"><p>DELETE
/apis/{api.id}/subscriptions/{subscription.id}/apikeys/{apiKey.id}</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>POST
/apis/{api.id}/keys/_verify?apiKey={apiKey.key}</p></td>
<td style="text-align: left;"><p>GET
/apis/{api.id}/subscriptions/_canCreate?application={application.id}&amp;key={apiKey.key}</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>DELETE
/apis/{api.id}/subscriptions/{subscription.id}/keys/{apiKey.key}</p></td>
<td style="text-align: left;"><p>DELETE
/apis/{api.id}/subscriptions/{subscription.id}/apikeys/{apiKey.id}</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>GET
/apis/{api.id}/subscriptions/{subscription.id}/keys</p></td>
<td style="text-align: left;"><p>GET
/apis/{api.id}/subscriptions/{subscription.id}/apikeys</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>POST
/apis/{api.id}/subscriptions/{subscription.id}</p></td>
<td style="text-align: left;"><p>POST
/apis/{api.id}/subscriptions/{subscription.id}/apikeys/_renew</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>POST
/apis/{api.id}/subscriptions/{subscription.id}/keys/{apiKey.key}/_reactivate</p></td>
<td style="text-align: left;"><p>POST
/apis/{api.id}/subscriptions/{subscription.id}/apikeys/{apiKey.id}/_reactivate</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>GET
/applications/{application.id}/subscriptions/{subscription.id}/keys</p></td>
<td style="text-align: left;"><p>GET
/applications/{application.id}/subscriptions/{subscription.id}/apikeys</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>POST
/applications/{application.id}/subscriptions/{subscription.id}</p></td>
<td style="text-align: left;"><p>POST
/applications/{application.id}/subscriptions/{subscription.id}/apikeys/_renew</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>DELETE
/applications/{application.id}/subscriptions/{subscription.id}/keys/{apiKey.key}</p></td>
<td style="text-align: left;"><p>DELETE
/applications/{application.id}/subscriptions/{subscription.id}/apikeys/{apiKey.id}</p></td>
</tr>
</tbody>
</table>
<h2 id="repository">Repository</h2>
<h3 id="mongodb_1">MongoDB</h3>
<p>Before running any script, please create a dump of your existing
database.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.12.0/api-keys-migration.js">/apim/3.x/mongodb/3.12.0/api-keys-migration.js</a><br/>
This script adds <strong>key</strong> and <strong>api</strong> columns in api keys <strong>keys</strong> table.</p>
<h2 id="breaking-changes_13">Breaking changes</h2>
<h2 id="management-web-ui_2">Management Web UI</h2>
<p>From with this version, the name of the APIM Console component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Console component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim-console*-webui-x.y.z.zip</code> instead of
    <code>gravitee-management-webui-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Console folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim-console*-ui-x.y.z</code> instead of
    <code>graviteeio-management-ui-x.y.z</code></p>
</li>
</ol>
<h3 id="portal-web-ui_2">Portal Web UI</h3>
<p>From with this version, the name of the APIM Portal component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Portal component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim*-portal-webui-x.y.z.zip</code> instead of
    <code>gravitee-portal-webui-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Portal folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim*-portal-ui-x.y.z</code> instead of
    <code>graviteeio-portal-ui-x.y.z</code></p>
</li>
</ol>
<p>In future versions, others plugins &amp; components might be renamed. Stay
tuned!</p>
<h2 id="repository_1">Repository</h2>
<h3 id="mongodb_2">Mongodb</h3>
<p>Before running any script, please create a dump of your existing
database.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.11.1/1-event-debug-migration.js">/apim/3.x/mongodb/3.11.1/1-event-debug-migration.js</a><br/>
This script removes the <code>API_ID</code> property for events of type <code>DEBUG</code>.</p>
<h2 id="breaking-changes_14">Breaking changes</h2>
<p>From with this version, the name of the APIM Rest APIs component
changes. As a consequence:</p>
<ol>
<li>
<p>The APIM Rest API component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim*-rest-api-x.y.z.zip</code> instead of
    <code>gravitee-management-rest-api-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Rest API folder within the full distribution
    zip file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim*-rest-api-x.y.z</code> instead of
    <code>graviteeio-rest-api-x.y.z</code></p>
</li>
</ol>
<p>In future versions, others plugins &amp; components might be renamed. Stay
tuned!</p>
<h2 id="security-update">Security update</h2>
<p>From this version, API properties can be encrypted.</p>
<p>Encryption key is located in gravitee.yml of Rest APIs and gateway.</p>
<p>You should not use this default key, and set your own custom 32 bytes
length secret.</p>
<p>```ỳml # Encrypt API properties using this secret api: properties:
encryption: secret: vvLJ4Q8Khvv9tm2tIPdkGEdmgKUruAL6 ```</p>
<h2 id="breaking-changes_15">Breaking changes</h2>
<h3 id="api-key-and-jwt-plans_2">API key and JWT plans</h3>
<p>The security chain (the internal process that selects the executable
plan for the incoming request and applies the related security rules)
parses all active plans to select and execute the relevant one.</p>
<p><strong>Prior to this version:</strong></p>
<ul>
<li>
<p>The API key plan was executed if the request contained an API key.</p>
</li>
<li>
<p>The JWT plan was executed if the request contained a Bearer token.</p>
</li>
</ul>
<p><strong>From this version:</strong></p>
<p>The security chain has been improved to select and execute plans more
efficiently. As a result, API keys and JWT plans are now only executed
if there is an active subscription related to the provided security
token. If there is no relevant subscription, the currently parsed plans
are not executed and the security chain moves to parse the next
available plans. The process continues until the security chain parses
plans related to the provided security token and these plans are
executed, or until all available plans are parsed without a match.</p>
<p>Specific examples of this change are provided in the table below:</p>
<table>
<colgroup>
<col style="width: 25%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
<col style="width: 25%"/>
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p>API plans</p></td>
<td style="text-align: left;"><p>Request</p></td>
<td style="text-align: left;"><p>Prior to this version</p></td>
<td style="text-align: left;"><p>From this version</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>API key plan + Keyless plan</p></td>
<td style="text-align: left;"><p>Request contains an invalid API
key</p></td>
<td style="text-align: left;"><p>API key plan is executed = HTTP 401
unauthorized</p></td>
<td style="text-align: left;"><p>Keyless plan is executed</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>JWT plan 1 + JWT plan 2</p></td>
<td style="text-align: left;"><p>Request contains a Bearer token valid
for JWT plan 2</p></td>
<td style="text-align: left;"><p>JWT plan 1 is executed = HTTP 401
unauthorized</p></td>
<td style="text-align: left;"><p>JWT plan 2 is executed</p></td>
</tr>
</tbody>
</table>
<h2 id="breaking-changes_16">Breaking changes</h2>
<p>From this version, and for the next 3.10.x versions, the name of the
Elasticsearch repository component changes.<br/>
As a consequence, the Elasticsearch repository component available on
<a href="https://download.gravitee.io">https://download.gravitee.io</a> is now<br/>
<code>gravitee-*apim*-repository-elasticsearch-x.y.z.zip</code></p>
<p>instead of<br/>
<code>gravitee-repository-elasticsearch-x.y.z.zip</code></p>
<p>This plugin has also been moved in another folder:<br/>
<a href="https://download.gravitee.io/#graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/">https://download.gravitee.io/#graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/</a>.</p>
<p>You can download directly the Elasticsearch repository using this
link:<br/>
<a href="https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/gravitee-apim-repository-elasticsearch-3.10.15.zip">https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-elasticsearch/gravitee-apim-repository-elasticsearch-3.10.15.zip</a></p>
<h2 id="breaking-change_4">Breaking Change</h2>
<h3 id="docker-images-enterprise-edition_3">Docker Images - Enterprise Edition</h3>
<p>To reduce the number of security vulnerabilities and ensure a better
maintenance in the future, the base Docker images used for the
Enterprise Edition have changed.</p>
<p>As of 3.10.13, APIM Gateway EE and Management API EE base Docker images
are moving from <strong>Ubuntu</strong> to <strong>Alpine</strong> with JDK 17. It means users
creating their own Docker images based on the one provided by
Gravitee.io might need to update their Dockerfile to make them
compatible with the Alpine distribution.</p>
<p><em>Notes</em>: Community Edition users will not be affected as the base images
were already <strong>Alpine</strong> ones.</p>
<h2 id="elastic-search-reporter-plugins-configuration_1">Elastic Search reporter plugins configuration</h2>
<p>Before Gravitee 3.10.9 :</p>
<ul>
<li>
<p>For ES&gt;=7, GeoIp and UserAgent plugins are enabled by default in
    Gravitee, and can’t be disabled</p>
</li>
<li>
<p>For ES&lt;7, those plugins are disabled by default and can be
    enabled in Gravitee configuration.</p>
</li>
</ul>
<p>Since Gravitee 3.10.9, it behave the same way for all ES versions :
GeoIp and UserAgent plugins are be enabled by default, and can be
disabled by overriding default
<code>reporters.elasticsearch.pipeline.plugins.ingest</code> configuration.</p>
<p>If your Gravitee configuration enables a plugin which is not available
on your ES instance, you will get this kind of error message on gateway
startup :</p>
<p><code>Unable to create ES pipeline 'gravitee_pipeline': status[400] response[{"error":{"root_cause":[{"reason":"No processor type exists with name [geoip]","processor_type":"geoip"}]</code></p>
<p>And then, you have to override
<code>reporters.elasticsearch.pipeline.plugins.ingest</code> default configuration,
to remove unrelevant plugin.</p>
<h2 id="breaking-changes_17">Breaking changes</h2>
<h3 id="gateway_5">Gateway</h3>
<p>From with this version, the name of the APIM Gateway component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Gateway component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim-gateway*-x.y.z.zip</code> instead of
    <code>gravitee-gateway-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Gateway folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim-gateway*-x.y.z</code> instead of
    <code>graviteeio-gateway-x.y.z</code></p>
</li>
</ol>
<h2 id="plans-anomalies-in-database">Plans anomalies in database</h2>
<h3 id="tldr">TLDR</h3>
<p>In Gravitee &lt; 3.10.8, some processes have caused database
inconsistencies, regarding plans and flows.</p>
<p>Gravitee 3.10.8, introduces an automated process to detect and fix those
anomalies.</p>
<p>By default, this process will run in dry mode and won’t do any database
modification. Check the <code>gravitee-upgraders.log</code> file to see if any of
your API is concerned, and how it will be fixed.</p>
<p>After check, fix those database anomalies by disabling the dry mode.</p>
<h3 id="what-are-those-database-anomalies">What are those database anomalies ?</h3>
<p>In Gravitee &lt; 3.10.8, some processes have caused inconsistencies in
database, regarding plans and flows.</p>
<p>Concerned processes are :</p>
<ul>
<li>
<p>import an API</p>
</li>
<li>
<p>promote an API</p>
</li>
<li>
<p>duplicate an API</p>
</li>
<li>
<p>rollback an API</p>
</li>
</ul>
<p>For concerned APIs, plans and flows displayed in console doesn’t reflect
the ones runned by gateway.</p>
<h3 id="how-to-fix-it">How to fix it ?</h3>
<p>Gravitee 3.10.8, introduces an automated process to detect and fix those
anomalies.</p>
<p>This process will run on management API startup. By default, it will run
in <em>dry</em> mode, to detect and list anomalies without fixing them in
database.</p>
<p>After you checked those anomalies have to be fixed, you can disable the
<em>dry</em> mode, and restart your API to update your database.</p>
<h3 id="my-apis-are-concerned">My APIs are concerned ?</h3>
<p>On management API startup, you will see this trace in the console, or
the dedicated <code>gravitee-upgraders.log</code> log file.</p>
<p>If no anomaly was detected :</p>
<div class="highlight"><pre><span></span><code>14:19:43.171 [main] INFO  i.g.r.a.s.i.u.PlansDataFixUpgrader - Starting PlansDataFixUpgrader execution with dry-run enabled
14:19:43.352 [main] INFO  i.g.r.a.s.i.u.PlansDataFixUpgrader - No plan data anomaly found
14:19:43.360 [main] INFO  i.g.r.a.s.i.u.PlansDataFixUpgrader - Finishing PlansDataFixUpgrader execution
</code></pre></div>
<p>If anomalies were detected :</p>
<div class="highlight"><pre><span></span><code>14:51:50.890 [main] INFO  i.g.r.a.s.i.u.PlansDataFixUpgrader - Starting PlansDataFixUpgrader execution with dry-run enabled
14:51:50.979 [main] WARN  i.g.r.a.s.i.u.PlansDataFixUpgrader -
14:51:50.980 [main] WARN  i.g.r.a.s.i.u.PlansDataFixUpgrader - ##############################################################
14:51:50.980 [main] WARN  i.g.r.a.s.i.u.PlansDataFixUpgrader - #                           WARNING                          #
14:51:50.980 [main] WARN  i.g.r.a.s.i.u.PlansDataFixUpgrader - ##############################################################
14:51:50.980 [main] WARN  i.g.r.a.s.i.u.PlansDataFixUpgrader -
14:51:50.980 [main] WARN  i.g.r.a.s.i.u.PlansDataFixUpgrader - We detected database anomalies in your plans data.
14:51:50.980 [main] WARN  i.g.r.a.s.i.u.PlansDataFixUpgrader -
14:51:50.980 [main] WARN  i.g.r.a.s.i.u.PlansDataFixUpgrader - THIS IS A DRY RUN. DATABASE WON'T BE UPDATED.
14:51:50.980 [main] WARN  i.g.r.a.s.i.u.PlansDataFixUpgrader - To fix anomalies, disable the dry run mode.
14:51:50.980 [main] WARN  i.g.r.a.s.i.u.PlansDataFixUpgrader - Below, a list of changes that would happen without dry run
14:51:50.980 [main] WARN  i.g.r.a.s.i.u.PlansDataFixUpgrader - See related documentation : https://docs.gravitee.io/apim/3.x/apim_installguide_migration.html#upgrade_to_3_10_8
14:51:50.980 [main] WARN  i.g.r.a.s.i.u.PlansDataFixUpgrader -
14:51:50.980 [main] WARN  i.g.r.a.s.i.u.PlansDataFixUpgrader - ##############################################################
14:51:50.980 [main] WARN  i.g.r.a.s.i.u.PlansDataFixUpgrader -
14:51:50.980 [main] INFO  i.g.r.a.s.i.u.PlansDataFixUpgrader - Plans anomalies found for API "Movies" (99999999-6595-9999-8a7e-796595985132) :
14:51:50.981 [main] INFO  i.g.r.a.s.i.u.PlansDataFixUpgrader - - Will create plan "Gold-Recreated" for API "Movies" (99999999-6595-9999-8a7e-796595985132), which is missing in plans table
14:51:50.982 [main] INFO  i.g.r.a.s.i.u.PlansDataFixUpgrader - - Will create plan "Free-Recreated" for API "Movies" (99999999-6595-9999-8a7e-796595985132), which is missing in plans table
14:51:50.982 [main] INFO  i.g.r.a.s.i.u.PlansDataFixUpgrader - - Will close plan "Free" (66664545-1234-1234-1234-1234567891425), cause it's absent from api definition
14:51:51.019 [main] INFO  i.g.r.a.s.i.u.PlansDataFixUpgrader - Plans anomalies found for API "Horses" (0456455556-5465-5465-4894955554) :
14:51:51.019 [main] INFO  i.g.r.a.s.i.u.PlansDataFixUpgrader - - Will create plan "LimitedUsage-Recreated" for API "Horses" (0456455556-5465-5465-4894955554), which is missing in plans table
14:51:51.025 [main] INFO  i.g.r.a.s.i.u.PlansDataFixUpgrader - Plans anomalies found for API "Petstore" (121112-1211-1111-121121211) :
14:51:51.025 [main] INFO  i.g.r.a.s.i.u.PlansDataFixUpgrader - - Will create plan "Silver-Recreated" for API "Petstore" (121112-1211-1111-121121211), which is missing in plans table
14:51:51.058 [main] INFO  i.g.r.a.s.i.u.PlansDataFixUpgrader - Finishing PlansDataFixUpgrader execution
</code></pre></div>
<h3 id="how-anomalies-are-fixed">How anomalies are fixed ?</h3>
<p>This process will fix your API plans data.</p>
<p>But it won’t change the runtime behavior of your APIs in the gateway,
until you redeploy them manually from console.</p>
<h4 id="some-plans-were-considered-by-gateway-but-were-not-visible-in-console">Some plans were considered by gateway, but were not visible in console :</h4>
<p>They will be recreated in console, and you will see new plans appear :</p>
<ul>
<li>
<p>with name suffixed by "-Recreated"</p>
</li>
<li>
<p>with description "This plan has been recreated during a data fix
    process. See documentation : …"</p>
</li>
</ul>
<p>Those plans will be in <code>deprecated</code> state, without any subscription. It
will allow you to check those plans and their flows, and close them if
relevant.</p>
<h4 id="some-plans-visible-in-console-were-not-considered-by-gateway">Some plans visible in console were not considered by gateway :</h4>
<p>Those plans will be closed, as they were not actually used during API
runtime.</p>
<h3 id="im-ready-how-to-disable-the-dry-mode-and-fix-data">I’m ready. How to disable the dry mode and fix data ?</h3>
<p>To fix data in your database, turn off the dry-mode, setting the
<code>services.plans-data-fix-upgrader.dryRun</code> parameter to false. Then,
restart the management API.</p>
<h3 id="further-configuration">Further configuration ?</h3>
<p>You can configure this process in gravitee.yml, for example :</p>
<div class="highlight"><pre><span></span><code>services:
  plans-data-fix-upgrader:
    enabled: true
    dryRun: true
    notifyApiOwner: false
</code></pre></div>
<p>Possible configuration keys are :</p>
<table>
<colgroup>
<col style="width: 33%"/>
<col style="width: 33%"/>
<col style="width: 33%"/>
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p>Key</p></td>
<td style="text-align: left;"><p>Description</p></td>
<td style="text-align: left;"><p>Default value</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>enabled</p></td>
<td style="text-align: left;"><p>If set to false, the process won’t
execute</p></td>
<td style="text-align: left;"><p>true</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>dryRun</p></td>
<td style="text-align: left;"><p>If set to true, the process won’t make
any database change, but only list changes.</p></td>
<td style="text-align: left;"><p>true</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>notifyApiOwner</p></td>
<td style="text-align: left;"><p>If set to true, an email notification
will be send to the api owner for each fixed API.</p></td>
<td style="text-align: left;"><p>false</p></td>
</tr>
</tbody>
</table>
<h2 id="breaking-changes_18">Breaking changes</h2>
<h3 id="management-web-ui_3">Management Web UI</h3>
<p>From with this version, the name of the APIM Console component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Console component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim-console*-webui-x.y.z.zip</code> instead of
    <code>gravitee-management-webui-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Console folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim-console*-ui-x.y.z</code> instead of
    <code>graviteeio-management-ui-x.y.z</code></p>
</li>
</ol>
<h3 id="portal-web-ui_3">Portal Web UI</h3>
<p>From with this version, the name of the APIM Portal component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Portal component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim*-portal-webui-x.y.z.zip</code> instead of
    <code>gravitee-portal-webui-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Portal folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim*-portal-ui-x.y.z</code> instead of
    <code>graviteeio-portal-ui-x.y.z</code></p>
</li>
</ol>
<p>In future versions, others plugins &amp; components might be renamed. Stay
tuned!</p>
<h2 id="breaking-changes_19">Breaking changes</h2>
<p>From this version, the name of the APIM Rest APIs component changes. As
a consequence:</p>
<ol>
<li>
<p>The APIM Rest API component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim*-rest-api-x.y.z.zip</code> instead of
    <code>gravitee-management-rest-api-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Rest API folder within the full distribution
    zip file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim*-rest-api-x.y.z</code> instead of
    <code>graviteeio-rest-api-x.y.z</code></p>
</li>
</ol>
<p>In future versions, others plugins &amp; components might be renamed. Stay
tuned!</p>
<h2 id="repository_2">Repository</h2>
<h3 id="mongodb_3">Mongodb</h3>
<p>Before running any script, please create a dump of your existing
database.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.10.1/1-upgrade-parameters-for-theme-console.js">/apim/3.x/mongodb/3.10.1/1-upgrade-parameters-for-theme-console.js</a><br/>
This script upgrade default value of <code>theme.logo</code> in parameters</p>
<h2 id="breaking-changes_20">Breaking changes</h2>
<p>From with this version, the name of some components of Gravitee.io APIM
changes. As a consequence, the following plugins are renamed :</p>
<table>
<colgroup>
<col style="width: 50%"/>
<col style="width: 50%"/>
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p>before 3.10.0</p></td>
<td style="text-align: left;"><p>after 3.10.0</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>gravitee.repository.mongodb-x.y.z.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.mongodb-x.y.z.zip</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>gravitee.repository.jdbc-x.y.z.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.jdbc-x.y.z.zip</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>gravitee.repository.redis-x.y.z.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.redis-x.y.z.zip</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>gravitee.repository.hazelcast-x.y.z.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.hazelcast-x.y.z.zip</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>gravitee.repository.gateway.bridge.http.client-x.y.z.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.gateway.bridge.http.client-x.y.z.zip</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>gravitee.repository.gateway.bridge.http.server-x.y.z.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.gateway.bridge.http.server-x.y.z.zip</p></td>
</tr>
</tbody>
</table>
<p>These plugins have also been moved in another folder on
<a href="https://download.gravitee.io">https://download.gravitee.io</a>. For instance, the MongoDB plugin is now
available using this link:</p>
<p><a href="https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-mongodb/gravitee-apim-repository-mongodb-3.10.0.zip">https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-mongodb/gravitee-apim-repository-mongodb-3.10.0.zip</a></p>
<p>In future versions, others plugins will be renamed. Stay tuned!</p>
<h2 id="breaking-changes_21">Breaking changes</h2>
<h3 id="threat-protection-policies">Threat protection policies</h3>
<p>From this version, configuration form for JSON Threat Protection Policy
and XML Threat Protection Policy changes: <code>null</code> is no longer
authorized, only <code>-1</code> is accepted for a <em>no limit</em> setting.</p>
<h4 id="impacts">Impacts</h4>
<ul>
<li>
<p>If some fields are set to <code>null</code> in your db, and if you want to edit
    this policy configuration through <strong>APIM Console</strong>, then the form
    will replace them by the default value. Please, be careful when
    updating your policy if you do not want the default values to be
    applied.</p>
</li>
<li>
<p>If some fields are set to <code>null</code> in your db, and if you want to edit
    this policy configuration through <strong>REST API</strong>, an error message
    will appear if you do not set an explicit value for those fields in
    your request payload.</p>
</li>
</ul>
<h3 id="management-rest-api">Management Rest API</h3>
<p>From with this version, the name of the APIM Rest APIs component
changes. As a consequence:</p>
<ol>
<li>
<p>The APIM Rest API component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim*-rest-api-x.y.z.zip</code> instead of
    <code>gravitee-management-rest-api-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Rest API folder within the full distribution
    zip file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim*-rest-api-x.y.z</code> instead of
    <code>graviteeio-rest-api-x.y.z</code></p>
</li>
</ol>
<p>In future versions, others plugins &amp; components might be renamed. Stay
tuned!</p>
<h2 id="breaking-changes_22">Breaking changes</h2>
<p>From with this version, the name of some components of Gravitee.io APIM
changes. As a consequence, the following plugins are renamed :</p>
<table>
<colgroup>
<col style="width: 50%"/>
<col style="width: 50%"/>
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p>before 3.9.3</p></td>
<td style="text-align: left;"><p>after 3.9.3</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>gravitee.repository.mongodb-3.9.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.mongodb-3.9.x.zip</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>gravitee.repository.jdbc-3.9.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.jdbc-3.9.x.zip</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>gravitee.repository.redis-3.9.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.redis-3.9.x.zip</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>gravitee.repository.hazelcast-3.9.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.hazelcast-3.9.x.zip</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>gravitee.repository.gateway.bridge.http.client-3.9.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.gateway.bridge.http.client-3.9.x.zip</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>gravitee.repository.gateway.bridge.http.server-3.9.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.gateway.bridge.http.server-3.9.x.zip</p></td>
</tr>
</tbody>
</table>
<p>These plugins have also been moved in another folder on
<a href="https://download.gravitee.io">https://download.gravitee.io</a>. For instance, the MongoDB plugin is now
available using this link:</p>
<p><a href="https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-mongodb/gravitee-apim-repository-mongodb-3.9.3.zip">https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-mongodb/gravitee-apim-repository-mongodb-3.9.3.zip</a></p>
<p>In future versions, others plugins will be renamed. Stay tuned!</p>
<h2 id="important-alert-engine">Important: Alert Engine</h2>
<p>For users of Gravitee Enterprise Edition with Alert Engine, please check
your gravitee configuration to ensure that the alert engine feature is
explictly enable. Starting from this version, the alert engine connector
is disabled by default if the option <code>alerts.alert-engine-enabled</code> is
missing from the gravitee.yaml. (see
<a href="https://docs.gravitee.io/ae/apim_installation.html#configuration">https://docs.gravitee.io/ae/apim_installation.html#configuration</a>)</p>
<h2 id="warning">Warning</h2>
<p><strong>For JDBC users only</strong>, please don’t upgrade to 3.9.0 since we detected
a critical bug in a liquibase script that could lead to data loss.<br/>
This will be fixed in 3.9.1.<br/>
We apologize for this inconvenience.</p>
<p>GitHub issue: <a href="https://github.com/gravitee-io/issues/issues/5711">5711</a></p>
<h2 id="breaking-changes_23">Breaking changes</h2>
<p>From this version, in order to propose a better swagger descriptor, all
enum values <strong>returned</strong> by the APIM API are in uppercase.</p>
<p>Lowercase and uppercase values are still accepted in incoming requests.</p>
<h2 id="memory-management">Memory management</h2>
<p>Starting from this new version, the default Xms and Xmx parameters has
been fixed to 256m. Previous value was too high and does not reflect
real memory usage for both the API Gateway and Management API.</p>
<p>If, for some reasons, you need to increase those default values, you can
set the <code>GIO_MIN_MEM</code> and <code>GIO_MAX_MEM</code> environment variables in your
scripts. Those variables are then "injected" into the JAVA_OPTS during
bootstrap.</p>
<h2 id="apim-api-tags-and-tenants">APIM API - Tags and Tenants</h2>
<p>This version changes permissions' scope from <code>ENVIRONMENT</code> to
<code>ORGANIZATION</code> for:</p>
<ul>
<li>
<p>TAG</p>
</li>
<li>
<p>TENANT</p>
</li>
<li>
<p>ENTRYPOINT</p>
</li>
</ul>
<p>These permissions are now readonly for the scope <code>ENVIRONMENT</code>. They
will be deleted on version 3.10. If you are using these permissions,
please update them for the scope <code>ORGANIZATION</code>.</p>
<h2 id="repository_3">Repository</h2>
<h3 id="mongodb_4">Mongodb</h3>
<p>Before running any script, please create a dump of your existing
database.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.9.0/1-tags-and-tenants-migration.js">/apim/3.x/mongodb/3.9.0/1-tags-and-tenants-migration.js</a><br/>
This script adds referenceId set to <em>DEFAULT</em> and referenceType set to
<em>ORGANIZATION</em> to tags, tenants and entrypoint collections.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.9.0/2-events-migration.js">/apim/3.x/mongodb/3.9.0/2-events-migration.js</a><br/>
This script modifies events, so an event can be linked to more than one
environment.</p>
<h2 id="breaking-changes_24">Breaking changes</h2>
<p>From with this version, the name of some components of Gravitee.io APIM
changes. As a consequence, the following plugins are renamed :</p>
<table>
<colgroup>
<col style="width: 50%"/>
<col style="width: 50%"/>
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p>before 3.8.6</p></td>
<td style="text-align: left;"><p>after 3.8.6</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>gravitee.repository.mongodb-3.8.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.mongodb-3.8.x.zip</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>gravitee.repository.jdbc-3.8.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.jdbc-3.8.x.zip</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>gravitee.repository.redis-3.8.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.redis-3.8.x.zip</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>gravitee.repository.hazelcast-3.8.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.hazelcast-3.8.x.zip</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>gravitee.repository.gateway.bridge.http.client-3.8.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.gateway.bridge.http.client-3.8.x.zip</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>gravitee.repository.gateway.bridge.http.server-3.8.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.gateway.bridge.http.server-3.8.x.zip</p></td>
</tr>
</tbody>
</table>
<p>These plugins have also been moved in another folder on
<a href="https://download.gravitee.io">https://download.gravitee.io</a>. For instance, the MongoDB plugin is now
available using this link:</p>
<p><a href="https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-mongodb/gravitee-apim-repository-mongodb-3.8.6.zip">https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-mongodb/gravitee-apim-repository-mongodb-3.8.6.zip</a></p>
<p>In future versions, others plugins will be renamed. Stay tuned!</p>
<h2 id="repository_4">Repository</h2>
<h3 id="mongodb_5">Mongodb</h3>
<p>Before running any script, please create a dump of your existing
database.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.8.0/1-page-acl-migration.js">/apim/3.x/mongodb/3.8.0/1-page-acl-migration.js</a><br/>
This script replaces <strong>excluded_groups</strong> by <strong>visibility</strong>,
<strong>excludedAccessControls</strong> and <strong>accessControls</strong> collection.</p>
<h2 id="repository_5">Repository</h2>
<p>Since 3.7, you have the ability to configure a prefix for your tables or
collections name.</p>
<p>Rate limit configuration has to be defined in both Gateway and
Management <code>gravitee.yml</code> files.</p>
<p>With this centralized configuration, you can disable the liquibase phase
of the gateway, if you do not want it to modify your dbms.</p>
<p>If you choose to use prefix, follow these instructions.</p>
<h3 id="mongodb_6">Mongodb</h3>
<h4 id="new-installation">New installation</h4>
<p>You just have to modify the <code>gravitee.yml</code> files of gateway and console
to configure <code>management.mongodb.prefix</code> and <code>ratelimit.mongodb.prefix</code>.
Default value is empty.</p>
<h4 id="migrate-an-existing-installation">Migrate an existing installation</h4>
<p>Before running any script, please create a dump of your existing
database.</p>
<p>If you want to prefix your collections, you will have to rename them.
You can use the following script.</p>
<p>Check documentation at
<a href="https://docs.gravitee.io/apim/3.x/apim_installguide_repositories_mongodb.html">https://docs.gravitee.io/apim/3.x/apim_installguide_repositories_mongodb.html</a></p>
<p>This script rename all the collections adding the <code>prefix</code> and
<code>rateLimitPrefix</code>.</p>
<p>For the following steps, we admit you choose this prefix: prefix_</p>
<ol>
<li>
<p>Modify <code>gravitee.yml</code> to configure <code>management.mongodb.prefix</code> and
    <code>ratelimit.mongodb.prefix</code> if needed.</p>
</li>
<li>
<p>Run the following script to rename your collections:
    <a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.7.0/1-rename-collections-with-prefix.js">/apim/3.x/mongodb/3.7.0/1-rename-collections-with-prefix.js</a></p>
</li>
<li>
<p>Run your instances!</p>
</li>
</ol>
<h3 id="jdbc">JDBC</h3>
<h4 id="new-installation_1">New installation</h4>
<p>You just have to modify the <code>gravitee.yml</code> files of gateway and console
to configure <code>management.jdbc.prefix</code> and <code>ratelimit.jdbc.prefix</code>.
Default value is empty.</p>
<h4 id="migrate-an-existing-installation_1">Migrate an existing installation</h4>
<p>Before running any script, please create a dump of your existing
database.</p>
<p>If you want to prefix your tables, you will have to rename them. Check
documentation at
<a href="https://docs.gravitee.io/apim/3.x/apim_installguide_repositories_jdbc.html">https://docs.gravitee.io/apim/3.x/apim_installguide_repositories_jdbc.html</a></p>
<p>For the following steps, we admit you choose this prefix: prefix_</p>
<ol>
<li>
<p>Modify <code>gravitee.yml</code> to configure <code>management.jdbc.prefix</code> and
    <code>ratelimit.jdbc.prefix</code> if needed.</p>
</li>
<li>
<p>Run the application on a new database to generate
    <code>prefix_databasechangelog</code></p>
</li>
<li>
<p>Replace the content of <code>databasechangelog</code> table by the generated
    one from <code>prefix_databasechangelog</code></p>
</li>
<li>
<p>Rename your tables following this syntax: prefix_tablename</p>
</li>
<li>
<p>Rename your indexes following this syntax: idx_prefix_indexname</p>
</li>
<li>
<p>Rename your primary keys following this syntax: pk_prefix_pkname</p>
</li>
<li>
<p>Run your instances!</p>
</li>
</ol>
<h2 id="elasticsearch">Elasticsearch</h2>
<p>With Elasticsearch version above 7.x, <code>geoip</code> and <code>user_agent</code> plugins
are automatically enabled.</p>
<h2 id="apim-api">APIM API</h2>
<p>Two new configuration keys have been added to the <code>gravitee.yml</code> file,
they should be set with the URLs of the UI console and the management
API: ```yml console: ui: url: gravitee_apim_ui_url # TO UPDATE
WITH YOUR OWN URL api: url: gravitee_apim_management_api_url # TO
UPDATE WITH YOUR OWN URL ```</p>
<p>NB: <strong>For Gravitee Cockpit to work properly these URLs are mandatory</strong>,
they will be used by Cockpit to interact with your APIM installation.</p>
<h2 id="breaking-changes_25">Breaking changes</h2>
<h3 id="gateway_6">Gateway</h3>
<p>From with this version, the name of the APIM Gateway component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Gateway component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim-gateway*-x.y.z.zip</code> instead of
    <code>gravitee-gateway-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Gateway folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim-gateway*-x.y.z</code> instead of
    <code>graviteeio-gateway-x.y.z</code></p>
</li>
</ol>
<h2 id="breaking-changes_26">Breaking changes</h2>
<h3 id="management-web-ui_4">Management Web UI</h3>
<p>From with this version, the name of the APIM Console component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Console component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim-console*-webui-x.y.z.zip</code> instead of
    <code>gravitee-management-webui-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Console folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim-console*-ui-x.y.z</code> instead of
    <code>graviteeio-management-ui-x.y.z</code></p>
</li>
</ol>
<h3 id="portal-web-ui_4">Portal Web UI</h3>
<p>From with this version, the name of the APIM Portal component changes.
As a consequence:</p>
<ol>
<li>
<p>The APIM Portal component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim*-portal-webui-x.y.z.zip</code> instead of
    <code>gravitee-portal-webui-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Portal folder within the full distribution zip
    file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim*-portal-ui-x.y.z</code> instead of
    <code>graviteeio-portal-ui-x.y.z</code></p>
</li>
</ol>
<p>In future versions, others plugins &amp; components might be renamed. Stay
tuned!</p>
<h2 id="breaking-changes_27">Breaking changes</h2>
<h3 id="threat-protection-policies_1">Threat protection policies</h3>
<p>From this version, configuration form for JSON Threat Protection Policy
and XML Threat Protection Policy changes: <code>null</code> is no longer
authorized, only <code>-1</code> is accepted for a <em>no limit</em> setting.</p>
<h4 id="impacts_1">Impacts</h4>
<ul>
<li>
<p>If some fields are set to <code>null</code> in your db, and if you want to edit
    this policy configuration through <strong>APIM Console</strong>, then the form
    will replace them by the default value. Please, be careful when
    updating your policy if you do not want the default values to be
    applied.</p>
</li>
<li>
<p>If some fields are set to <code>null</code> in your db, and if you want to edit
    this policy configuration through <strong>REST API</strong>, an error message
    will appear if you do not set an explicit value for those fields in
    your request payload.</p>
</li>
</ul>
<h3 id="management-rest-api_1">Management Rest API</h3>
<p>From with this version, the name of the APIM Rest APIs component
changes. As a consequence:</p>
<ol>
<li>
<p>The APIM Rest API component available on
    <a href="https://download.gravitee.io">https://download.gravitee.io</a> is now
    <code>gravitee-*apim*-rest-api-x.y.z.zip</code> instead of
    <code>gravitee-management-rest-api-x.y.z.zip</code></p>
</li>
<li>
<p>The name of the APIM Rest API folder within the full distribution
    zip file (graviteeio-full-x.y.z.zip) is now
    <code>graviteeio-*apim*-rest-api-x.y.z</code> instead of
    <code>graviteeio-rest-api-x.y.z</code></p>
</li>
</ol>
<p>In future versions, others plugins &amp; components might be renamed. Stay
tuned!</p>
<h2 id="improvements">Improvements</h2>
<p>Some performance improvements have been made
(<a href="https://github.com/gravitee-io/issues/issues/6066">#6066</a>). As a
consequence, the scheduled service used to automatically close expired
subscriptions now runs every hour instead of every 5 seconds</p>
<h2 id="breaking-changes_28">Breaking changes</h2>
<p>From with this version, the name of some components of Gravitee.io APIM
changes. As a consequence, the following plugins are renamed :</p>
<table>
<colgroup>
<col style="width: 50%"/>
<col style="width: 50%"/>
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p>before 3.5.18</p></td>
<td style="text-align: left;"><p>after 3.5.18</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>gravitee.repository.mongodb-3.5.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.mongodb-3.5.x.zip</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>gravitee.repository.jdbc-3.5.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.jdbc-3.5.x.zip</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>gravitee.repository.redis-3.5.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.redis-3.5.x.zip</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>gravitee.repository.hazelcast-3.5.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.hazelcast-3.5.x.zip</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>gravitee.repository.gateway.bridge.http.client-3.5.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.gateway.bridge.http.client-3.5.x.zip</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>gravitee.repository.gateway.bridge.http.server-3.5.x.zip</p></td>
<td style="text-align: left;"><p>gravitee.<strong>apim</strong>.repository.gateway.bridge.http.server-3.5.x.zip</p></td>
</tr>
</tbody>
</table>
<p>These plugins have also been moved in another folder on
<a href="https://download.gravitee.io">https://download.gravitee.io</a>. For instance, the MongoDB plugin is now
available using this link:</p>
<p><a href="https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-mongodb/gravitee-apim-repository-mongodb-3.5.18.zip">https://download.gravitee.io/graviteeio-apim/plugins/repositories/gravitee-apim-repository-mongodb/gravitee-apim-repository-mongodb-3.5.18.zip</a></p>
<p>In future versions, others plugins will be renamed. Stay tuned!</p>
<h2 id="repository_6">Repository</h2>
<h3 id="mongodb_7">Mongodb</h3>
<p>Before running any script, please create a dump of your existing
database.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.5.14/1-fix-cors-env-vars.js">/apim/3.x/mongodb/3.5.14/1-fix-cors-env-vars.js</a><br/>
This script migrate CORS environment variables for portal and console.
(See below).</p>
<h2 id="breaking-changes_29">Breaking Changes</h2>
<h3 id="environment-variables">Environment variables</h3>
<p>Some environment variables have been doubled for the portal and the
console, see correspondence table:</p>
<table>
<colgroup>
<col style="width: 33%"/>
<col style="width: 33%"/>
<col style="width: 33%"/>
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p>before 3.5.14</p></td>
<td style="text-align: left;"><p>after 3.5.14 (for portal)</p></td>
<td style="text-align: left;"><p>after 3.5.14 (for console)</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>portal.http.cors.allow-origin</p></td>
<td style="text-align: left;"><p>http.api.portal.cors.allow-origin</p></td>
<td style="text-align: left;"><p>X</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>console.http.cors.allow-origin</p></td>
<td style="text-align: left;"><p>X</p></td>
<td style="text-align: left;"><p>http.api.management.cors.allow-origin</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>portal.http.cors.allow-headers</p></td>
<td style="text-align: left;"><p>http.api.portal.cors.allow-headers</p></td>
<td style="text-align: left;"><p>X</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>console.http.cors.allow-headers</p></td>
<td style="text-align: left;"><p>X</p></td>
<td style="text-align: left;"><p>http.api.management.cors.allow-header</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>portal.http.cors.allow-methods</p></td>
<td style="text-align: left;"><p>http.api.portal.cors.allow-methods</p></td>
<td style="text-align: left;"><p>X</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>console.http.cors.allow-methods</p></td>
<td style="text-align: left;"><p>X</p></td>
<td style="text-align: left;"><p>http.api.management.cors.allow-methods</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>portal.http.cors.exposed-headers</p></td>
<td style="text-align: left;"><p>http.api.portal.cors.exposed-headers</p></td>
<td style="text-align: left;"><p>X</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>console.http.cors.exposed-headers</p></td>
<td style="text-align: left;"><p>X</p></td>
<td style="text-align: left;"><p>http.api.management.cors.exposed-headers</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>portal.http.cors.max-age</p></td>
<td style="text-align: left;"><p>http.api.portal.cors.max-age</p></td>
<td style="text-align: left;"><p>X</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>console.http.cors.max-age</p></td>
<td style="text-align: left;"><p>X</p></td>
<td style="text-align: left;"><p>http.api.management.cors.max-age</p></td>
</tr>
</tbody>
</table>
<h2 id="breaking-changes_30">Breaking Changes</h2>
<h3 id="management-api_1">Management API</h3>
<p>If you are using the REST API directly, please note that now these
requests need authentication:</p>
<h2 id="-">-</h2>
<h2 id="-_1">-</h2>
<h2 id="-_2">-</h2>
<h2 id="-_3">-</h2>
<h2 id="repository_7">Repository</h2>
<h3 id="mongodb_8">Mongodb</h3>
<p>Before running any script, please create a dump of your existing
database.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.5.2/1-add-DEFAULT-referenceId-in-memberships.js">/apim/3.x/mongodb/3.5.2/1-add-DEFAULT-referenceId-in-memberships.js</a><br/>
This script add the "DEFAULT" <code>referenceId</code> for memberships with <code>null</code>
one. This bug impacts users created when using social authentication
since version 3.5.0.</p>
<h2 id="breaking-changes_31">Breaking Changes</h2>
<h3 id="environment-variables_1">Environment variables</h3>
<p>Some environment variables have been doubled for the portal and the
console, see correspondence table:</p>
<table>
<colgroup>
<col style="width: 33%"/>
<col style="width: 33%"/>
<col style="width: 33%"/>
</colgroup>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p>before 3.5.0</p></td>
<td style="text-align: left;"><p>after 3.5.0 (for portal)</p></td>
<td style="text-align: left;"><p>after 3.5.0 (for console)</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>authentication.localLogin.enabled</p></td>
<td style="text-align: left;"><p>portal.authentication.localLogin.enabled</p></td>
<td style="text-align: left;"><p>console.authentication.localLogin.enabled</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>scheduler.tasks</p></td>
<td style="text-align: left;"><p>portal.scheduler.tasks</p></td>
<td style="text-align: left;"><p>console.scheduler.tasks</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>scheduler.notifications</p></td>
<td style="text-align: left;"><p>portal.scheduler.notifications</p></td>
<td style="text-align: left;"><p>console.scheduler.notifications</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>reCaptcha.enabled</p></td>
<td style="text-align: left;"><p>portal.reCaptcha.enabled</p></td>
<td style="text-align: left;"><p>console.reCaptcha.enabled</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>reCaptcha.siteKey</p></td>
<td style="text-align: left;"><p>portal.reCaptcha.siteKey</p></td>
<td style="text-align: left;"><p>console.reCaptcha.siteKey</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>portal.support.enabled</p></td>
<td style="text-align: left;"><p>portal.support.enabled</p></td>
<td style="text-align: left;"><p>console.support.enabled</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>portal.userCreation.enabled</p></td>
<td style="text-align: left;"><p>portal.userCreation.enabled</p></td>
<td style="text-align: left;"><p>console.userCreation.enabled</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>portal.userCreation.automaticValidation.enabled</p></td>
<td style="text-align: left;"><p>portal.userCreation.automaticValidation.enabled</p></td>
<td style="text-align: left;"><p>console.userCreation.automaticValidation.enabled</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>http.cors.allow-origin</p></td>
<td style="text-align: left;"><p>portal.http.cors.allow-origin</p></td>
<td style="text-align: left;"><p>console.http.cors.allow-origin</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>http.cors.allow-headers</p></td>
<td style="text-align: left;"><p>portal.http.cors.allow-headers</p></td>
<td style="text-align: left;"><p>console.http.cors.allow-headers</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>http.cors.allow-methods</p></td>
<td style="text-align: left;"><p>portal.http.cors.allow-methods</p></td>
<td style="text-align: left;"><p>console.http.cors.allow-methods</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>http.cors.exposed-headers</p></td>
<td style="text-align: left;"><p>portal.http.cors.exposed-headers</p></td>
<td style="text-align: left;"><p>console.http.cors.exposed-headers</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>http.cors.max-age</p></td>
<td style="text-align: left;"><p>portal.http.cors.max-age</p></td>
<td style="text-align: left;"><p>console.http.cors.max-age</p></td>
</tr>
</tbody>
</table>
<h2 id="distribution">Distribution</h2>
<p>From this version, Gravitee.IO APIM is distributed with MongoDB and JDBC
plugins, as well as Hybrid HTTP plugin (gateway-bridge-http), in the
<code>full</code> ZIP.<br/>
You no longer have to choose between the "full" or "full-jdbc" ZIP file.</p>
<h2 id="repository_8">Repository</h2>
<h3 id="mongodb_9">Mongodb</h3>
<p>Before running any script, please create a dump of your existing
database.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.5.0/1-duplicate-some-parameters-for-console.js">/apim/3.x/mongodb/3.5.01-duplicate-some-parameters-for-console.js</a><br/>
This script duplicates some parameters for the console to have different
behaviors between portal and console. It also modifies the _id of each
mongo document to add referenceId and referenceType.</p>
<h2 id="repository_9">Repository</h2>
<h3 id="mongodb_10">Mongodb</h3>
<p>Before running any script, please create a dump of your existing
database.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.4.0/1-update-audit-to-replace-PORTAL-with_ORGANIZATION-and-ENVIRONMENT.js">/apim/3.x/mongodb/3.4.0/1-update-audit-to-replace-PORTAL-with_ORGANIZATION-and-ENVIRONMENT.js</a><br/>
This script convert PORTAL audit into ENVIRONMENT audits or ORGANIZATION
audits regarding some conditions.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.4.0/2-update-default-role-REVIEWER.js">/apim/3.x/mongodb/3.4.0/2-update-default-role-REVIEWER.js</a><br/>
This script add new permissions to the default REVIEWER role.</p>
<h2 id="repository_10">Repository</h2>
<h3 id="mongodb_11">Mongodb</h3>
<p>Before running any script, please create a dump of your existing
database.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.3.0/1-update-users-and-identityProviders.js">/apim/3.x/mongodb/3.3.0/1-update-users-and-identityProviders.js</a><br/>
This script replaces <strong>referenceId</strong> and <strong>referenceType</strong> with
<strong>organizationId</strong> for <code>users</code> and <code>identity_providers</code> collections.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.3.0/2-update-json-validation-policy-scopes.js">/apim/3.x/mongodb/3.3.0/2-update-json-validation-policy-scopes.js</a><br/>
This script replaces <strong>REQUEST</strong> and <strong>RESPONSE</strong> with
<strong>REQUEST_CONTENT</strong> and <strong>RESPONSE_CONTENT</strong> for json-validation
policy configuration in <code>apis</code> collections.</p>
<h2 id="deprecation">Deprecation</h2>
<h3 id="management-api_2">Management API</h3>
<p>Starting with this version, <code>User</code> and <code>IdentityProvider</code> are now linked
to an organization and not to an environment. As a consequence, the
Management REST API has been updated. If you are using the REST API
directly, please note that you should adapt your URL for these resources
as they will no longer be accessible from version 4.x In the meantime,
these resources will be tagged as <code>Deprecated</code>.</p>
<table>
<colgroup>
<col style="width: 50%"/>
<col style="width: 50%"/>
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Deprecated in 3.3.0, deleted in 4.x</th>
<th style="text-align: left;">Since 3.3.0</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/configuration/identities</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/configuration/identities</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/configuration/rolescopes</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/configuration/rolescopes</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/search/users</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/search/users</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/user</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/user</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/user/subscribeNewsletter</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/user/subscribeNewsletter</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/user/avatar</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/user/avatar</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/user/login</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/user/login</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/user/logout</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/user/logout</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/user/tasks</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/user/tasks</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/user/tags</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/user/tags</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/user/notifications</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/user/notifications</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/user/tokens</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/user/tokens</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/users</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/users</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/users/registration</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/users/registration</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>/organizations/DEFAULT/environments/DEFAULT/users/registration/finalize</p></td>
<td style="text-align: left;"><p>/organizations/DEFAULT/users/registration/finalize</p></td>
</tr>
</tbody>
</table>
<h2 id="breaking-changes_32">Breaking Changes</h2>
<h3 id="portal-ui">Portal UI</h3>
<p>The variables css of <code>gv-link</code> component has been modified to improve
the theme’s customization. Now the component uses :</p>
<ul>
<li>
<p>Active border color <code>--gv-link-active--bdc</code> instead of Active border
    bottom color <code>--gv-link-active--bdbc</code></p>
</li>
<li>
<p>Active border style <code>--gv-link-active--bds</code> instead of Active border
    bottom style <code>--gv-link-active--bdbs</code></p>
</li>
<li>
<p>Active border width <code>--gv-link-active--bdw</code> instead of Active border
    bottom width <code>--gv-link-active--bdbw</code></p>
</li>
</ul>
<p>For example, if you has set <code>--gv-link-active--bdbw=3px</code>, now you should
set <code>--gv-link-active--bdw=0 0 3px 0</code></p>
<h2 id="docker-images">Docker images</h2>
<p>All the UI based docker images (APIM Console, APIM Portal) are now using
HTTP port 8080 and HTTPS port 8443 by default to avoid the need of a
root account to use 80/443 to improve the security of our platform.</p>
<h2 id="breaking-changes_33">Breaking Changes</h2>
<h3 id="management-api_3">Management API</h3>
<p>Starting with this version, <code>Apis</code> resources require authentication even
for the GET method.</p>
<p>If you are using the REST API directly, please note that you should
adapt your application.</p>
<p><code>Apis</code> resources start with the path
<code>/management/organizations/DEFAULT/environments/DEFAULT/apis/</code></p>
<h3 id="portal-api_1">Portal API</h3>
<p>Starting with this version, <code>Apis</code>, <code>Pages</code> and <code>Categories</code> resources
that were public for GET method require authentication if the users have
to sign in to access the portal. (forceLogin = true)</p>
<p>If you are using the REST API directly, please note that you should
adapt your application.</p>
<ul>
<li>
<p><code>Apis</code> resources start with the path
    <code>/portal/environments/DEFAULT/apis</code></p>
</li>
<li>
<p><code>Pages</code> resources start with the path
    <code>/portal/environments/DEFAULT/pages</code></p>
</li>
<li>
<p><code>Categories</code> resources start with the path
    <code>/portal/environments/DEFAULT/categories</code></p>
</li>
</ul>
<h2 id="breaking-changes_34">Breaking changes</h2>
<p>The <code>portalURL</code> parameter in the gravitee.yml file has been removed. It
has become useless with this issue
<a href="https://github.com/gravitee-io/issues/issues/4144">#4144</a>.</p>
<p>As this <code>portalURL</code> stands for the former portal, it will be replaced by
the <code>management.url</code> parameter in the console settings. This parameter
will be initialized with the former <code>portalURL</code> value if it still exists
in your gravitee.yml. Otherwise, the default value of <code>management.url</code>
is <a href="http://localhost:3000">http://localhost:3000</a></p>
<p>The <code>portal.url</code> parameter in the console settings will also have a
default value : <a href="http://localhost:4100">http://localhost:4100</a></p>
<h2 id="view-renamed-to-categories"><em>View</em> renamed to <em>Categories</em></h2>
<p>In the new portal, <em>views</em> are called <em>categories</em>. But in the
management console, they are still called <em>views</em>. To be consistent, the
term <em>View</em> is replaced by <em>Category</em> in the whole platform.</p>
<p>Linked to this issue:
<a href="https://github.com/gravitee-io/issues/issues/3843">#3843</a></p>
<h3 id="mongodb_12">Mongodb</h3>
<p>Before running any script, please create a dump of your existing
database.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.0.2/1-rename-view-in-category.js">upgrades/3.x/3.0.2/mongodb/1-rename-view-in-category.js</a><br/>
This script renames a field in <em>apis</em> collection, rename <em>views</em>
collection, change 3 parameters, replace <em>view</em> by <em>category</em> in
<em>audits</em> collection and convert documentation view LINK to ctagory LINK</p>
<h2 id="important">Important</h2>
<p>If you are using mongoDB, it is <strong>strongly recommended</strong> to run the
scripts to upgrade your database <strong>before</strong> starting the new version of
the gravitee REST APIs. Otherwise, you could experience data corruption
issues.</p>
<p>Mongo version <strong>MUST</strong> be at least <strong>3.6</strong></p>
<h2 id="general">General</h2>
<h3 id="organization-environment">Organization &amp; Environment</h3>
<p>In this new version Gravitee comes with a new way of managing your
environments. By default, Gravitee is configured with a first
Organization: ``` organization { id: DEFAULT, name: Default
organization } ``` And a first Environment in this Organization:
``` environment { id: DEFAULT, name: Default environment,
organization: DEFAULT } ```</p>
<p>It will allow you to manage more than one environment for each instance
of Gravitee.</p>
<h2 id="breaking-changes_35">Breaking Changes</h2>
<h3 id="api-key-policy">API-Key policy</h3>
<p>In this new version, if api-keys used to call an API is invalid or has
expired, the gateway will fail with a <strong>401</strong> (instead of 403 in
previous versions of Gravitee).</p>
<h3 id="management-api_4">Management API</h3>
<p>If you are using the REST API directly, please note that you will have
to adapt the URL from <code>https://host/management/</code> to
<code>https://host/management/organizations/DEFAULT/environments/DEFAULT/</code></p>
<p>The resource <code>/views/default</code> has been deleted since a view does not
have a <strong>default</strong> field anymore.</p>
<h3 id="management-ui">Management UI</h3>
<p>The actual portal has been replaced by a brand new version, with its own
location. As a consequence, the URL of the management UI has been
modified to remove the <strong>/management</strong> part.</p>
<p>For instance, to access the <em>Platform Overview</em> page, you should use
<code>https://host/\#!/platform</code> instead of
<code>https://host/#!/management/platform</code></p>
<h3 id="memberships-roles-and-role-mappings">Memberships, roles and role mappings</h3>
<p>One major breaking change in this new version is the replacement of
<strong>MANAGEMENT</strong> and <strong>PORTAL</strong> scopes by <strong>ENVIRONNMENT</strong> and
<strong>ORGANIZATION</strong> scopes. It’s not just a renaming but a dispatch of
permissions among these 2 news scopes. As a consequence, all existing
memberships, roles, groups and Identity Providers role mappings should
be updated.</p>
<ul>
<li>
<p>Memberhips, roles and groups have to be updated with migration
    scripts <a href="#mongodb">here</a></p>
</li>
<li>
<p>Role Mappings for Identity Providers stored in database will be
    updated with a specific upgrader. See <a href="#upgrader">Upgrader</a></p>
</li>
<li>
<p>Role mappings defined in the <strong>gravitee.yml</strong> file have to be
    updated with these new scopes.</p>
</li>
</ul>
<p>Here’s a correlation table of permissions before and after migration :</p>
<table>
<colgroup>
<col style="width: 33%"/>
<col style="width: 33%"/>
<col style="width: 33%"/>
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Permission Name</th>
<th style="text-align: left;">Scope Name before migration</th>
<th style="text-align: left;">Scope name after migration</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><p>INSTANCE</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>GROUP</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>TAG</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>TENANT</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>API</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>ROLE</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ORGANIZATION</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>APPLICATION</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>PLATFORM</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>AUDIT</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>NOTIFICATION</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>USER</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ORGANIZATION</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>MESSAGE</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>DICTIONARY</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>ALERT</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>ENTRYPOINT</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>SETTINGS</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>DASHBOARD</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>QUALITY_RULE</p></td>
<td style="text-align: left;"><p>MANAGEMENT</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>METADATA</p></td>
<td style="text-align: left;"><p>PORTAL</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>DOCUMENTATION</p></td>
<td style="text-align: left;"><p>PORTAL</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>APPLICATION</p></td>
<td style="text-align: left;"><p>PORTAL</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>VIEW</p></td>
<td style="text-align: left;"><p>PORTAL</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>TOP_APIS</p></td>
<td style="text-align: left;"><p>PORTAL</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>SETTINGS</p></td>
<td style="text-align: left;"><p>PORTAL</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>API_HEADER</p></td>
<td style="text-align: left;"><p>PORTAL</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="even">
<td style="text-align: left;"><p>IDENTITY_PROVIDER</p></td>
<td style="text-align: left;"><p>PORTAL</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><p>CLIENT_REGISTRATION_PROVIDER</p></td>
<td style="text-align: left;"><p>PORTAL</p></td>
<td style="text-align: left;"><p>ENVIRONMENT</p></td>
</tr>
</tbody>
</table>
<h2 id="repository_11">Repository</h2>
<h3 id="mongodb_13">Mongodb</h3>
<p>Before running any script, please create a dump of your existing
database.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.0.0/1-collections-linked-to-environment-or-organization.js">/apim/3.x/mongodb/3.0.0/1-collections-linked-to-environment-or-organization.js</a><br/>
This script adds new fields that refer the default environment or the
default organization.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.0.0/2-roles-groups-and-memberships-migration.js">/apim/3.x/mongodb/3.0.0/2-roles-groups-and-memberships-migration.js</a><br/>
This script migrates permission values in roles since MANAGEMENT roles
and PORTAL roles have been merged and dispatched into new ENVIRONMENT
and ORGANIZATION roles. It also updates memberships and groups by adding
or removing columns. All previous indexes for <strong>roles</strong> and
<strong>memberships</strong> will be deleted and replaced by new indexes.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.0.0/3-replace-apiArray-by-unique-api.js">/apim/3.x/mongodb/3.0.0/3-replace-apiArray-by-unique-api.js</a><br/>
This script adds a new field that refers the api and remove the api
array. All previous indexes for <strong>plans</strong> will be deleted and replaced
by new indexes.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.0.0/4-remove-devMode.js">/apim/3.x/mongodb/3.0.0/4-remove-devMode.js</a><br/>
This script removes the <em>devMode</em> parameter, since the legacy portal has
been replaced.</p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.0.0/5-remove-orphan-documentation-pages.js">/apim/3.x/mongodb/3.0.0/5-remove-orphan-documentation-pages.js</a><br/>
Due to a bug in a previous version of gravitee when importing APIs,
orphan pages may have been created. Orphan pages are all pages with a
parentId but no page with such id exists. In some situation, this can
lead to errors when accessing portal or apis documentation. You may use
this script to find and remove orphan pages.</p>
<p><em>Note: You can make a </em>dry run<em> by commenting line 6 and uncommenting
line 5.</em></p>
<p><a href="https://raw.githubusercontent.com/gravitee-io/gravitee-api-management/master/gravitee-apim-repository/gravitee-apim-repository-mongodb/src/main/resources/scripts/3.0.0/6-remove-ALL-view-and-defaultView-field.js">/apim/3.x/mongodb/3.0.0/6-remove-ALL-view-and-defaultView-field.js</a><br/>
This script removes the <em>All</em> <strong>view</strong>, since the legacy portal has been
replaced and the new portal does not need this default view anymore. The
script also updates existing views to remove <strong>defaultView</strong> field.</p>
<h2 id="upgrader">Upgrader</h2>
<h3 id="identity-providers">Identity providers</h3>
<p>Because of the evolution of the roles and their scope, role mappings in
<strong>Identity Providers</strong> must be updated. To achieve this, a specific
service has been created and will be launched at APIM startup. As this
is not necessary to launch this service more than once, it can be
disabled with some configuration.</p>
<div class="highlight"><pre><span></span><code>services:
  # v3 upgrader service. Can be disabled after first launch.
  v3-upgrader:
    enabled: true
</code></pre></div>
<h2 id="docker">Docker</h2>
<p>Docker images for Gravitee.io APIM have been renamed to follow the same
conventions as the others Gravitee.io modules.</p>
<p>In the case of Gravitee.io APIM, all the images have been prefixed by
<code>-apim</code>.</p>
<p>For example, for the API gateway <code>graviteeio/gateway</code> has been replaced
by <code>graviteeio/apim-gateway</code>.</p>
<p>Please have a look to the documentation at:
<a href="https://docs.gravitee.io/apim/3.x/apim_installguide_docker_images.html">https://docs.gravitee.io/apim/3.x/apim_installguide_docker_images.html</a></p>
<aside class="md-source-file">
<span class="md-source-file__fact">
<span class="md-icon" title="Date of last update">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"></path></svg>
</span>
<span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">January 19, 2023</span>
</span>
</aside>
<form class="md-feedback" hidden="" name="feedback">
<fieldset>
<legend class="md-feedback__title">
        Was this page helpful?
      </legend>
<div class="md-feedback__inner">
<div class="md-feedback__list">
<button class="md-feedback__icon md-icon" data-md-value="1" title="This page was helpful" type="submit">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"></path></svg>
</button>
<button class="md-feedback__icon md-icon" data-md-value="0" title="This page could be improved" type="submit">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"></path></svg>
</button>
</div>
<div class="md-feedback__note">
<div data-md-value="1" hidden="">
              
              
                
              
              
                Thanks for your feedback!
              
            </div>
<div data-md-value="0" hidden="">
              
              
                
              
              
                Thanks for your feedback! Help us improve this page by <a href="https://github.com/gravitee-io/gravitee-docs/" rel="noopener" target="_blank">contributing directly</a> or sharing your thoughts in a new documentation <a href="https://github.com/gravitee-io/gravitee-docs/issues/new" rel="noopener" target="_blank">GitHub issue</a>.
              
            </div>
</div>
</div>
</fieldset>
</form>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<a class="md-top md-icon" data-md-component="top" hidden="" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg>
            Back to top
          </a>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Installing and updating Plugins" class="md-footer__link md-footer__link--prev" href="../installation-guide-plugins/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Installing and updating Plugins
            </div>
</div>
</a>
<a aria-label="Next: Introduction" class="md-footer__link md-footer__link--next" href="../../quickstart/quickstart-overview/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Introduction
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Gravitee.io © 2023 All rights reserved. <a href="https://www.gravitee.io/privacy-policy" rel="noopener" target="_blank"> Privacy Policy</a>. <a href="https://www.gravitee.io/legal" rel="noopener" target="_blank"> Legal</a>.
    </div>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "content.code.annotate", "navigation.top", "navigation.indexes", "toc.follow", "toc.integrate"], "search": "../../../assets/javascripts/workers/search.939a4419.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
<script src="../../../assets/javascripts/bundle.af94fead.min.js"></script>
<script src="../../../javascripts/extra.js"></script>
<script src="../../../assets/js/swagger-ui-bundle.js"></script>
</body>
</html>